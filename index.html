<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STU League - History & Records</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-display { font-family: 'Bebas Neue', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%); }
        .card-shadow { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .table-row-hover:hover { background-color: #fef2f2; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
        .nav-link { transition: all 0.2s; }
        .nav-link:hover { transform: translateY(-1px); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
// ============================================
// FIREBASE CONFIGURATION
// ============================================
// INSTRUCTIONS: Replace these values with your Firebase project config
// 1. Go to https://console.firebase.google.com
// 2. Create a project or select existing one
// 3. Go to Project Settings > General > Your apps > Add app (Web)
// 4. Copy the config object and paste below

const firebaseConfig = {
  apiKey: "AIzaSyDOTBYKF9_AdwjrND-wmA4wKOKAMz2ETDQ",
  authDomain: "stuleague.firebaseapp.com",
  projectId: "stuleague",
  storageBucket: "stuleague.firebasestorage.app",
  messagingSenderId: "182561365323",
  appId: "1:182561365323:web:1fb5487041df4c1d981cce",
  measurementId: "G-8P8X0SWCLG"
};

// Set to true once you've added your Firebase config above
const USE_FIREBASE = true;

// Admin password - change this!
const ADMIN_PASSWORD = "casablanca";

// ============================================
// INITIAL DATA
// ============================================
const INITIAL_DATA = {
    overallStats: [
        { name: "Max", w: 91, l: 83, percent: 0.523, tpf: 22505.26, tpa: 22989.86, tpfSeason: 1875.44, tpaSeason: 1915.82, playoffWins: 13, playoffLosses: 8, playoffAppearances: 8, playoffWinPct: 0.619 },
        { name: "Jackson", w: 90, l: 84, percent: 0.517, tpf: 22238.74, tpa: 22374.22, tpfSeason: 1853.23, tpaSeason: 1864.52, playoffWins: 13, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.684 },
        { name: "Brad", w: 85, l: 89, percent: 0.489, tpf: 22515.74, tpa: 22129.04, tpfSeason: 1876.31, tpaSeason: 1844.09, playoffWins: 8, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.571 },
        { name: "Breeze", w: 94, l: 80, percent: 0.540, tpf: 22539.22, tpa: 22182.98, tpfSeason: 1878.27, tpaSeason: 1848.58, playoffWins: 13, playoffLosses: 4, playoffAppearances: 8, playoffWinPct: 0.765 },
        { name: "Bryan", w: 77, l: 97, percent: 0.443, tpf: 20935.46, tpa: 21693.12, tpfSeason: 1744.62, tpaSeason: 1807.76, playoffWins: 3, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.333 },
        { name: "Kalen", w: 80, l: 94, percent: 0.460, tpf: 22092.24, tpa: 22330.24, tpfSeason: 1841.02, tpaSeason: 1860.85, playoffWins: 11, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.647 },
        { name: "Dom", w: 83, l: 91, percent: 0.477, tpf: 21499.47, tpa: 21498.76, tpfSeason: 1791.62, tpaSeason: 1791.56, playoffWins: 6, playoffLosses: 8, playoffAppearances: 9, playoffWinPct: 0.429 },
        { name: "Aric", w: 82, l: 92, percent: 0.471, tpf: 21699.66, tpa: 21582.24, tpfSeason: 1808.30, tpaSeason: 1798.52, playoffWins: 7, playoffLosses: 7, playoffAppearances: 8, playoffWinPct: 0.500 },
        { name: "Drew", w: 89, l: 85, percent: 0.511, tpf: 21922.28, tpa: 22287.94, tpfSeason: 1826.86, tpaSeason: 1857.33, playoffWins: 8, playoffLosses: 9, playoffAppearances: 9, playoffWinPct: 0.471 },
        { name: "Wilson", w: 94, l: 66, percent: 0.588, tpf: 21341.72, tpa: 20075.44, tpfSeason: 1778.48, tpaSeason: 1672.95, playoffWins: 12, playoffLosses: 7, playoffAppearances: 8, playoffWinPct: 0.632 },
        { name: "Molidor & Volgi", w: 5, l: 9, percent: 0.357, tpf: 1634.20, tpa: 1779.06, tpfSeason: 136.18, tpaSeason: 148.26, playoffWins: 0, playoffLosses: 0, playoffAppearances: 0, playoffWinPct: 0 },
    ],
    overallFinishes: [
        { name: "Max", first: 2, second: 2, third: 1, tpf: 0, winnings: 1700 },
        { name: "Wilson", first: 2, second: 1, third: 1, tpf: 2, winnings: 1700 },
        { name: "Jackson", first: 2, second: 3, third: 1, tpf: 0, winnings: 1900 },
        { name: "Brad", first: 2, second: 1, third: 1, tpf: 1, winnings: 1600 },
        { name: "Breeze", first: 3, second: 0, third: 1, tpf: 3, winnings: 2200 },
        { name: "Bryan", first: 0, second: 1, third: 1, tpf: 0, winnings: 300 },
        { name: "Kalen", first: 1, second: 1, third: 3, tpf: 2, winnings: 1300 },
        { name: "Dom", first: 0, second: 1, third: 3, tpf: 1, winnings: 600 },
        { name: "Aric", first: 0, second: 2, third: 1, tpf: 3, winnings: 800 },
        { name: "Drew", first: 1, second: 1, third: 0, tpf: 1, winnings: 900 },
        { name: "Molidor & Volgi", first: 0, second: 0, third: 0, tpf: 0, winnings: 0 },
    ],
    records: [
        { record: "Most W's", team: "Kalen/Drew", yearWeek: "2015/2025", result: 12 },
        { record: "Most L's", team: "Bryan/Kalen", yearWeek: "2015/2013", result: 11 },
        { record: "Highest TPF", team: "Wilson", yearWeek: "2018", result: 2037.6 },
        { record: "Lowest TPF", team: "Bryan", yearWeek: "2015", result: 1420.4 },
        { record: "Weekly High", team: "Aric", yearWeek: "2014 Wk 8", result: 222.8 },
        { record: "Weekly Low", team: "Bryan", yearWeek: "2015 Wk 10", result: 52 },
        { record: "Playoff High", team: "Aric", yearWeek: "2022 R2", result: 220.6 },
        { record: "Playoff Low", team: "Bryan", yearWeek: "2019 R1", result: 72.26 },
    ],
    notes: [
        "2014 - Playoff teams reduced from 8 to 6",
        "2022 - Playoff W's column has been updated to include playoff BYE's (1st & 2nd place) as a Playoff W",
        "2022 - Added Playoff Win %age column",
        "2022 - Added Playoff High & Low",
        "2025 - Wilson Dropped, Volgidor Added"
    ],
    seasons: {
        "2025": {
            standings: [
                { rank: 1, name: "Drew", w: 12, l: 2, pf: 1998.50, pa: 1676.84, playoffWins: 0, playoffLosses: 0 },
                { rank: 2, name: "Bryan", w: 10, l: 4, pf: 1877.80, pa: 1618.62, playoffWins: 0, playoffLosses: 0 },
                { rank: 3, name: "Kalen", w: 8, l: 6, pf: 1831.68, pa: 1743.20, playoffWins: 0, playoffLosses: 0 },
                { rank: 4, name: "Brad", w: 8, l: 6, pf: 1864.44, pa: 1727.94, playoffWins: 0, playoffLosses: 0 },
                { rank: 5, name: "Dom", w: 7, l: 7, pf: 1571.99, pa: 1593.88, playoffWins: 0, playoffLosses: 0 },
                { rank: 6, name: "Jackson", w: 6, l: 8, pf: 1744.00, pa: 1865.70, playoffWins: 0, playoffLosses: 0 },
                { rank: 7, name: "Breeze", w: 6, l: 8, pf: 1514.62, pa: 1695.46, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Molidor & Volgi", w: 5, l: 9, pf: 1634.20, pa: 1779.06, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Max", w: 4, l: 10, pf: 1624.92, pa: 1884.10, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Aric", w: 4, l: 10, pf: 1544.84, pa: 1622.10, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "", second: "", third: "", tpf: "Drew" },
            highLow: { highTeam: "", highScore: 0, highWeek: 0, lowTeam: "", lowScore: 0, lowWeek: 0 }
        },
        "2024": {
            standings: [
                { rank: 1, name: "Dom", w: 9, l: 5, pf: 1961.18, pa: 1760.10, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Max", w: 9, l: 5, pf: 1909.44, pa: 1776.32, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Wilson", w: 8, l: 6, pf: 1820.50, pa: 1795.10, playoffWins: 0, playoffLosses: 1 },
                { rank: 4, name: "Drew", w: 8, l: 6, pf: 1804.82, pa: 1775.10, playoffWins: 3, playoffLosses: 0 },
                { rank: 5, name: "Breeze", w: 8, l: 6, pf: 1801.00, pa: 1824.42, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Kalen", w: 8, l: 6, pf: 1749.96, pa: 1679.14, playoffWins: 2, playoffLosses: 1 },
                { rank: 7, name: "Jackson", w: 6, l: 8, pf: 1744.28, pa: 1783.44, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Brad", w: 5, l: 9, pf: 1701.42, pa: 1816.56, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Aric", w: 5, l: 9, pf: 1571.46, pa: 1670.48, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Bryan", w: 4, l: 10, pf: 1629.34, pa: 1812.74, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Drew", second: "Kalen", third: "Dom", tpf: "Dom" },
            highLow: { highTeam: "Max", highScore: 188.96, highWeek: 14, lowTeam: "Aric", lowScore: 77.50, lowWeek: 3 }
        },
        "2023": {
            standings: [
                { rank: 1, name: "Jackson", w: 10, l: 4, pf: 1930, pa: 1703, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Max", w: 9, l: 5, pf: 1805, pa: 1784, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Breeze", w: 9, l: 5, pf: 2027, pa: 1677, playoffWins: 3, playoffLosses: 0 },
                { rank: 4, name: "Brad", w: 9, l: 5, pf: 1866, pa: 1802, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Wilson", w: 7, l: 7, pf: 1741, pa: 1786, playoffWins: 1, playoffLosses: 1 },
                { rank: 6, name: "Aric", w: 7, l: 7, pf: 1661, pa: 1695, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Dom", w: 7, l: 7, pf: 1593, pa: 1587, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Bryan", w: 5, l: 9, pf: 1715, pa: 1771, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Drew", w: 4, l: 10, pf: 1650, pa: 1956, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 3, l: 11, pf: 1630, pa: 1856, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Breeze", second: "Jackson", third: "Max", tpf: "Breeze" },
            highLow: { highTeam: "Bryan", highScore: 212.38, highWeek: 5, lowTeam: "Kalen", lowScore: 74.50, lowWeek: 4 }
        },
        "2022": {
            standings: [
                { rank: 1, name: "Wilson", w: 11, l: 3, pf: 1979.94, pa: 1641.78, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Jackson", w: 11, l: 3, pf: 1959.22, pa: 1726.18, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Drew", w: 8, l: 6, pf: 1800.70, pa: 1680.90, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Aric", w: 7, l: 7, pf: 1848.12, pa: 1680.20, playoffWins: 2, playoffLosses: 1 },
                { rank: 5, name: "Dom", w: 6, l: 8, pf: 1488.34, pa: 1715.66, playoffWins: 1, playoffLosses: 1 },
                { rank: 6, name: "Max", w: 6, l: 8, pf: 1855.14, pa: 1781.90, playoffWins: 1, playoffLosses: 1 },
                { rank: 7, name: "Kalen", w: 6, l: 8, pf: 1795.90, pa: 1909.66, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Breeze", w: 5, l: 9, pf: 1669.88, pa: 1875.32, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Brad", w: 5, l: 9, pf: 1595.40, pa: 1771.28, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Bryan", w: 5, l: 9, pf: 1545.96, pa: 1755.72, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Jackson", second: "Aric", third: "Wilson", tpf: "Wilson" },
            highLow: { highTeam: "Wilson", highScore: 182.92, highWeek: 8, lowTeam: "Dom", lowScore: 68.80, lowWeek: 4 }
        },
        "2021": {
            standings: [
                { rank: 1, name: "Wilson", w: 10, l: 4, pf: 1904.80, pa: 1652.82, playoffWins: 3, playoffLosses: 0 },
                { rank: 2, name: "Max", w: 9, l: 5, pf: 1908.68, pa: 1830.84, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Dom", w: 8, l: 6, pf: 1828.28, pa: 1642.70, playoffWins: 2, playoffLosses: 1 },
                { rank: 4, name: "Jackson", w: 7, l: 7, pf: 1686.06, pa: 1690.78, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Aric", w: 7, l: 7, pf: 1744.10, pa: 1756.12, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Breeze", w: 7, l: 7, pf: 1778.32, pa: 1843.48, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Brad", w: 6, l: 8, pf: 1950.02, pa: 1952.64, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Drew", w: 6, l: 8, pf: 1770.70, pa: 1825.32, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Bryan", w: 6, l: 8, pf: 1650.54, pa: 1817.26, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 4, l: 10, pf: 1777.90, pa: 1987.44, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Wilson", second: "Dom", third: "Jackson", tpf: "Brad" },
            highLow: { highTeam: "Aric", highScore: 188.10, highWeek: 13, lowTeam: "Kalen", lowScore: 56.72, lowWeek: 1 }
        },
        "2020": {
            standings: [
                { rank: 1, name: "Breeze", w: 11, l: 2, pf: 1786.90, pa: 1511.50, playoffWins: 3, playoffLosses: 0 },
                { rank: 2, name: "Max", w: 9, l: 4, pf: 1679.48, pa: 1771.10, playoffWins: 2, playoffLosses: 1 },
                { rank: 3, name: "Wilson", w: 8, l: 5, pf: 1842.78, pa: 1634.14, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Drew", w: 7, l: 6, pf: 1735.66, pa: 1641.58, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 6, l: 7, pf: 1720.26, pa: 1642.82, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Bryan", w: 6, l: 7, pf: 1659.32, pa: 1677.88, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Aric", w: 5, l: 8, pf: 1532.24, pa: 1658.74, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Dom", w: 5, l: 8, pf: 1617.28, pa: 1673.12, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Jackson", w: 4, l: 9, pf: 1656.48, pa: 1879.82, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 4, l: 9, pf: 1622.40, pa: 1762.10, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Max", second: "Brad", third: "Breeze", tpf: "Breeze" },
            highLow: { highTeam: "Bryan", highScore: 196.70, highWeek: 12, lowTeam: "Bryan", lowScore: 80.84, lowWeek: 6 }
        },
        "2019": {
            standings: [
                { rank: 1, name: "Breeze", w: 10, l: 3, pf: 1880.3, pa: 1597.9, playoffWins: 3, playoffLosses: 0 },
                { rank: 2, name: "Aric", w: 9, l: 4, pf: 1925.0, pa: 1622.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Max", w: 9, l: 4, pf: 1749.5, pa: 1625.6, playoffWins: 2, playoffLosses: 1 },
                { rank: 4, name: "Bryan", w: 8, l: 5, pf: 1608.6, pa: 1558.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 6, l: 7, pf: 1642.4, pa: 1772.2, playoffWins: 1, playoffLosses: 1 },
                { rank: 6, name: "Drew", w: 6, l: 7, pf: 1581.5, pa: 1699.1, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Jackson", w: 5, l: 8, pf: 1545.4, pa: 1721.2, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Wilson", w: 5, l: 8, pf: 1594.2, pa: 1716.7, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Dom", w: 4, l: 9, pf: 1665.0, pa: 1679.2, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 3, l: 10, pf: 1530.1, pa: 1729.0, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Breeze", second: "Max", third: "Brad", tpf: "Aric" },
            highLow: { highTeam: "Breeze", highScore: 194.3, highWeek: 5, lowTeam: "Brad", lowScore: 72.3, lowWeek: 11 }
        },
        "2018": {
            standings: [
                { rank: 1, name: "Wilson", w: 10, l: 3, pf: 2037.6, pa: 1685.0, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Jackson", w: 9, l: 4, pf: 1949.1, pa: 1790.3, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Dom", w: 8, l: 5, pf: 1865.5, pa: 1790.5, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Kalen", w: 7, l: 6, pf: 1801.3, pa: 1748.5, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 7, l: 6, pf: 1757.0, pa: 1777.9, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Drew", w: 6, l: 7, pf: 1804.1, pa: 1767.3, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Max", w: 5, l: 8, pf: 1719.2, pa: 1953.2, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Bryan", w: 5, l: 8, pf: 1461.3, pa: 1583.3, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Breeze", w: 5, l: 8, pf: 1536.6, pa: 1698.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Aric", w: 3, l: 10, pf: 1649.2, pa: 1786.3, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Jackson", second: "Wilson", third: "Dom", tpf: "Wilson" },
            highLow: { highTeam: "Wilson", highScore: 207.4, highWeek: 7, lowTeam: "Aric", lowScore: 76.2, lowWeek: 12 }
        },
        "2017": {
            standings: [
                { rank: 1, name: "Brad", w: 10, l: 3, pf: 1645.1, pa: 1393.3, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Bryan", w: 8, l: 5, pf: 1664.1, pa: 1526.0, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Kalen", w: 8, l: 5, pf: 1680.1, pa: 1579.7, playoffWins: 3, playoffLosses: 0 },
                { rank: 4, name: "Jackson", w: 7, l: 6, pf: 1650.6, pa: 1592.3, playoffWins: 2, playoffLosses: 1 },
                { rank: 5, name: "Drew", w: 7, l: 6, pf: 1446.7, pa: 1546.4, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Breeze", w: 7, l: 6, pf: 1618.5, pa: 1503.8, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Dom", w: 5, l: 8, pf: 1557.1, pa: 1619.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Max", w: 5, l: 8, pf: 1517.0, pa: 1604.9, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Aric", w: 4, l: 9, pf: 1476.5, pa: 1767.8, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Wilson", w: 4, l: 9, pf: 1479.7, pa: 1601.4, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Kalen", second: "Jackson", third: "Bryan", tpf: "Kalen" },
            highLow: { highTeam: "Brad", highScore: 168.9, highWeek: 7, lowTeam: "Max", lowScore: 67.0, lowWeek: 13 }
        },
        "2016": {
            standings: [
                { rank: 1, name: "Aric", w: 10, l: 3, pf: 1818.6, pa: 1564.1, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Wilson", w: 10, l: 3, pf: 1716.0, pa: 1540.4, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Breeze", w: 9, l: 4, pf: 1789.8, pa: 1686.6, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Kalen", w: 7, l: 6, pf: 1638.9, pa: 1573.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Jackson", w: 6, l: 7, pf: 1688.5, pa: 1672.7, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Dom", w: 6, l: 7, pf: 1568.8, pa: 1501.9, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Drew", w: 5, l: 8, pf: 1611.9, pa: 1786.8, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Bryan", w: 5, l: 8, pf: 1454.2, pa: 1722.6, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Max", w: 4, l: 9, pf: 1648.9, pa: 1762.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Brad", w: 3, l: 10, pf: 1579.3, pa: 1703.7, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Wilson", second: "Aric", third: "Kalen", tpf: "Aric" },
            highLow: { highTeam: "Aric", highScore: 189.7, highWeek: 10, lowTeam: "Kalen", lowScore: 78.9, lowWeek: 6 }
        },
        "2015": {
            standings: [
                { rank: 1, name: "Kalen", w: 12, l: 1, pf: 1840.4, pa: 1460.4, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Aric", w: 9, l: 4, pf: 1579.3, pa: 1452.0, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Drew", w: 8, l: 5, pf: 1646.4, pa: 1619.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 4, name: "Dom", w: 7, l: 6, pf: 1521.5, pa: 1611.6, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 7, l: 6, pf: 1801.3, pa: 1515.4, playoffWins: 3, playoffLosses: 0 },
                { rank: 6, name: "Max", w: 6, l: 7, pf: 1650.4, pa: 1757.1, playoffWins: 2, playoffLosses: 1 },
                { rank: 7, name: "Wilson", w: 6, l: 7, pf: 1748.0, pa: 1738.4, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Jackson", w: 4, l: 9, pf: 1429.3, pa: 1599.6, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Breeze", w: 4, l: 9, pf: 1643.3, pa: 1825.0, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Bryan", w: 2, l: 11, pf: 1420.4, pa: 1701.4, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Brad", second: "Max", third: "Kalen", tpf: "Kalen" },
            highLow: { highTeam: "Brad", highScore: 189.2, highWeek: 9, lowTeam: "Bryan", lowScore: 52.0, lowWeek: 10 }
        },
        "2014": {
            standings: [
                { rank: 1, name: "Drew", w: 8, l: 5, pf: 1571.8, pa: 1617.7, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Max", w: 8, l: 5, pf: 1676.8, pa: 1766.8, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Aric", w: 7, l: 6, pf: 1736.8, pa: 1629.8, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Wilson", w: 7, l: 6, pf: 1728.7, pa: 1604.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Jackson", w: 7, l: 6, pf: 1579.1, pa: 1581.7, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Bryan", w: 7, l: 6, pf: 1625.6, pa: 1547.6, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Brad", w: 6, l: 7, pf: 1669.3, pa: 1629.6, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Breeze", w: 6, l: 7, pf: 1705.1, pa: 1726.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Dom", w: 5, l: 8, pf: 1667.7, pa: 1718.9, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 4, l: 9, pf: 1573.0, pa: 1710.7, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Max", second: "Drew", third: "Aric", tpf: "Aric" },
            highLow: { highTeam: "Aric", highScore: 222.8, highWeek: 8, lowTeam: "Kalen", lowScore: 78.4, lowWeek: 3 }
        },
        "2013": {
            standings: [
                { rank: 1, name: "Max", w: 8, l: 5, pf: 1760.8, pa: 1691.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 2, name: "Wilson", w: 8, l: 5, pf: 1748.5, pa: 1679.0, playoffWins: 0, playoffLosses: 1 },
                { rank: 3, name: "Jackson", w: 8, l: 5, pf: 1676.7, pa: 1767.5, playoffWins: 2, playoffLosses: 1 },
                { rank: 4, name: "Brad", w: 7, l: 6, pf: 1723.8, pa: 1623.7, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Breeze", w: 7, l: 6, pf: 1787.9, pa: 1717.5, playoffWins: 3, playoffLosses: 0 },
                { rank: 6, name: "Bryan", w: 6, l: 7, pf: 1623.3, pa: 1600.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Kalen", w: 6, l: 7, pf: 1620.6, pa: 1590.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 8, name: "Dom", w: 6, l: 7, pf: 1593.8, pa: 1604.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 9, name: "Aric", w: 5, l: 8, pf: 1612.5, pa: 1676.9, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Drew", w: 4, l: 9, pf: 1499.5, pa: 1695.4, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Breeze", second: "Jackson", third: "Dom", tpf: "Breeze" },
            highLow: { highTeam: "Bryan", highScore: 196.0, highWeek: 1, lowTeam: "Dom", lowScore: 75.3, lowWeek: 3 }
        }
    }
};

// ============================================
// DATA SERVICE
// ============================================
let db = null;
let localData = JSON.parse(JSON.stringify(INITIAL_DATA));

// Try to load from localStorage
const savedData = localStorage.getItem('stuLeagueData');
if (savedData) {
    try {
        localData = JSON.parse(savedData);
    } catch (e) {
        console.log('Could not parse saved data');
    }
}

const saveToLocal = () => {
    localStorage.setItem('stuLeagueData', JSON.stringify(localData));
};

// Initialize Firebase if configured
if (USE_FIREBASE && FIREBASE_CONFIG.apiKey !== "YOUR_API_KEY_HERE") {
    try {
        firebase.initializeApp(FIREBASE_CONFIG);
        db = firebase.firestore();
        console.log('Firebase initialized');
    } catch (e) {
        console.log('Firebase initialization failed:', e);
    }
}

const dataService = {
    getOverallStats: async () => localData.overallStats,
    getOverallFinishes: async () => localData.overallFinishes,
    getRecords: async () => localData.records,
    getNotes: async () => localData.notes,
    getSeasons: async () => Object.keys(localData.seasons).sort((a, b) => b - a),
    getSeason: async (year) => localData.seasons[year],
    
    updateSeason: async (year, data) => {
        localData.seasons[year] = data;
        saveToLocal();
        return true;
    },
    deleteSeason: async (year) => {
        delete localData.seasons[year];
        saveToLocal();
        return true;
    },
    updateOverallStats: async (stats) => {
        localData.overallStats = stats;
        saveToLocal();
        return true;
    },
    updateRecords: async (records) => {
        localData.records = records;
        saveToLocal();
        return true;
    },
    updateNotes: async (notes) => {
        localData.notes = notes;
        saveToLocal();
        return true;
    }
};

// ============================================
// ICON COMPONENT
// ============================================
const Icon = ({ name, className = "w-5 h-5" }) => {
    React.useEffect(() => {
        lucide.createIcons();
    }, []);
    return <i data-lucide={name} className={className}></i>;
};

// ============================================
// COMPONENTS
// ============================================
const { useState, useEffect, useMemo } = React;

// Stats Table Component
const StatsTable = ({ data, columns, sortable = true }) => {
    const [sortCol, setSortCol] = useState(null);
    const [sortDir, setSortDir] = useState('desc');

    const sortedData = useMemo(() => {
        if (!sortCol) return data;
        return [...data].sort((a, b) => {
            const aVal = a[sortCol];
            const bVal = b[sortCol];
            if (typeof aVal === 'number') {
                return sortDir === 'asc' ? aVal - bVal : bVal - aVal;
            }
            return sortDir === 'asc' 
                ? String(aVal).localeCompare(String(bVal))
                : String(bVal).localeCompare(String(aVal));
        });
    }, [data, sortCol, sortDir]);

    const handleSort = (col) => {
        if (!sortable) return;
        if (sortCol === col) {
            setSortDir(sortDir === 'asc' ? 'desc' : 'asc');
        } else {
            setSortCol(col);
            setSortDir('desc');
        }
    };

    return (
        <div className="overflow-x-auto rounded-xl border border-gray-200 shadow-sm">
            <table className="w-full">
                <thead>
                    <tr className="bg-gradient-to-r from-gray-800 to-gray-900 text-white">
                        {columns.map((col, i) => (
                            <th
                                key={col.key}
                                onClick={() => handleSort(col.key)}
                                className={`px-3 py-3 text-xs font-bold uppercase tracking-wide whitespace-nowrap ${
                                    i === 0 ? 'text-left' : 'text-right'
                                } ${sortable ? 'cursor-pointer hover:bg-gray-700 transition-colors' : ''}`}
                            >
                                <div className={`flex items-center gap-1 ${i === 0 ? '' : 'justify-end'}`}>
                                    {col.label}
                                    {sortCol === col.key && (
                                        <span className="text-red-400">{sortDir === 'asc' ? 'â†‘' : 'â†“'}</span>
                                    )}
                                </div>
                            </th>
                        ))}
                    </tr>
                </thead>
                <tbody>
                    {sortedData.map((row, i) => (
                        <tr
                            key={i}
                            className={`border-b border-gray-100 transition-colors table-row-hover ${
                                i % 2 === 0 ? 'bg-white' : 'bg-gray-50'
                            }`}
                        >
                            {columns.map((col, j) => (
                                <td
                                    key={col.key}
                                    className={`px-3 py-2.5 text-sm ${j === 0 ? 'text-left font-semibold text-gray-900' : 'text-right text-gray-700'}`}
                                >
                                    {col.format ? col.format(row[col.key]) : row[col.key]}
                                </td>
                            ))}
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    );
};

// Card Component
const Card = ({ title, emoji, children, className = '' }) => (
    <div className={`bg-white rounded-2xl shadow-lg overflow-hidden animate-fadeIn ${className}`}>
        {title && (
            <div className="gradient-bg px-6 py-4 flex items-center gap-3">
                {emoji && <span className="text-2xl">{emoji}</span>}
                <h2 className="text-xl font-bold text-white">{title}</h2>
            </div>
        )}
        <div className="p-6">{children}</div>
    </div>
);

// Home Page
const HomePage = ({ stats, finishes, notes }) => {
    const statsColumns = [
        { key: 'name', label: 'Manager' },
        { key: 'w', label: 'W' },
        { key: 'l', label: 'L' },
        { key: 'percent', label: 'Win %', format: v => `${(v * 100).toFixed(1)}%` },
        { key: 'tpf', label: 'TPF', format: v => v.toLocaleString(undefined, { minimumFractionDigits: 2 }) },
        { key: 'tpfSeason', label: 'TPF/Szn', format: v => v.toFixed(2) },
        { key: 'playoffWins', label: 'PO W' },
        { key: 'playoffLosses', label: 'PO L' },
        { key: 'playoffAppearances', label: 'PO App' },
        { key: 'playoffWinPct', label: 'PO Win %', format: v => `${(v * 100).toFixed(1)}%` },
    ];

    const finishColumns = [
        { key: 'name', label: 'Manager' },
        { key: 'first', label: 'ðŸ¥‡ 1st' },
        { key: 'second', label: 'ðŸ¥ˆ 2nd' },
        { key: 'third', label: 'ðŸ¥‰ 3rd' },
        { key: 'tpf', label: 'TPF' },
        { key: 'winnings', label: 'Winnings', format: v => `$${v.toLocaleString()}` },
    ];

    return (
        <div className="space-y-8">
            <Card title="Overall Stats" emoji="ðŸ“Š">
                <StatsTable data={stats} columns={statsColumns} />
            </Card>

            <Card title="Overall Finishes" emoji="ðŸ†">
                <StatsTable data={finishes} columns={finishColumns} />
            </Card>

            <Card title="League Updates & Notes" emoji="ðŸ“">
                <ul className="space-y-2">
                    {notes.map((note, i) => (
                        <li key={i} className="flex items-start gap-3 p-3 bg-gray-50 rounded-lg">
                            <span className="text-red-600 font-bold">â€¢</span>
                            <span className="text-gray-700">{note}</span>
                        </li>
                    ))}
                </ul>
            </Card>
        </div>
    );
};

// Records Page
const RecordsPage = ({ records }) => {
    return (
        <Card title="League Records" emoji="ðŸ…">
            <div className="grid gap-4 md:grid-cols-2">
                {records.map((record, i) => (
                    <div
                        key={i}
                        className={`p-5 rounded-xl border-2 transition-all hover:shadow-lg ${
                            record.record.includes('High') || record.record.includes('Most W')
                                ? 'border-green-200 bg-green-50 hover:border-green-400'
                                : 'border-red-200 bg-red-50 hover:border-red-400'
                        }`}
                    >
                        <div className="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-1">
                            {record.record}
                        </div>
                        <div className="text-2xl font-black text-gray-900 mb-1">{record.team}</div>
                        <div className="flex items-center justify-between">
                            <span className="text-gray-600">{record.yearWeek}</span>
                            <span className={`text-xl font-bold ${
                                record.record.includes('High') || record.record.includes('Most W')
                                    ? 'text-green-600'
                                    : 'text-red-600'
                            }`}>
                                {typeof record.result === 'number' ? record.result.toLocaleString() : record.result}
                            </span>
                        </div>
                    </div>
                ))}
            </div>
        </Card>
    );
};

// Yearly Finishes Page
const YearlyFinishesPage = ({ seasons }) => {
    return (
        <Card title="Yearly Finishes" emoji="ðŸ“…">
            <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                {Object.entries(seasons)
                    .sort(([a], [b]) => b - a)
                    .map(([year, data]) => (
                        <div key={year} className="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200 hover:shadow-lg transition-shadow">
                            <div className="text-2xl font-black text-red-600 mb-4 pb-2 border-b-2 border-red-200">
                                {year}
                            </div>
                            {data.playoffs && (
                                <div className="space-y-2">
                                    {data.playoffs.first && (
                                        <div className="flex items-center gap-2">
                                            <span className="text-2xl">ðŸ¥‡</span>
                                            <span className="font-bold text-gray-900">{data.playoffs.first}</span>
                                        </div>
                                    )}
                                    {data.playoffs.second && (
                                        <div className="flex items-center gap-2">
                                            <span className="text-2xl">ðŸ¥ˆ</span>
                                            <span className="font-semibold text-gray-700">{data.playoffs.second}</span>
                                        </div>
                                    )}
                                    {data.playoffs.third && (
                                        <div className="flex items-center gap-2">
                                            <span className="text-2xl">ðŸ¥‰</span>
                                            <span className="text-gray-600">{data.playoffs.third}</span>
                                        </div>
                                    )}
                                    {data.playoffs.tpf && (
                                        <div className="flex items-center gap-2 pt-2 border-t border-gray-200 mt-2">
                                            <span className="text-xl">ðŸ“Š</span>
                                            <span className="text-sm text-gray-500">TPF:</span>
                                            <span className="font-semibold text-gray-700">{data.playoffs.tpf}</span>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    ))}
            </div>
        </Card>
    );
};

// Season Page
const SeasonPage = ({ year, data }) => {
    if (!data) {
        return (
            <Card title={`${year} Season`} emoji="ðŸ“…">
                <p className="text-gray-500 text-center py-8">No data available for this season.</p>
            </Card>
        );
    }

    const standingsColumns = [
        { key: 'rank', label: '#' },
        { key: 'name', label: 'Manager' },
        { key: 'w', label: 'W' },
        { key: 'l', label: 'L' },
        { key: 'pf', label: 'PF', format: v => v?.toFixed(2) },
        { key: 'pa', label: 'PA', format: v => v?.toFixed(2) },
        { key: 'playoffWins', label: 'PO W' },
        { key: 'playoffLosses', label: 'PO L' },
    ];

    return (
        <div className="space-y-8">
            <Card title={`${year} Final Standings`} emoji="ðŸ“‹">
                {data.standings && <StatsTable data={data.standings} columns={standingsColumns} />}
            </Card>

            {data.playoffs && (data.playoffs.first || data.playoffs.second || data.playoffs.third) && (
                <Card title="Playoff Results" emoji="ðŸ†">
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        {data.playoffs.first && (
                            <div className="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-5 text-center border-2 border-yellow-300">
                                <div className="text-4xl mb-2">ðŸ¥‡</div>
                                <div className="text-sm text-gray-500 uppercase font-semibold">Champion</div>
                                <div className="text-xl font-black text-gray-900">{data.playoffs.first}</div>
                            </div>
                        )}
                        {data.playoffs.second && (
                            <div className="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 text-center border-2 border-gray-300">
                                <div className="text-4xl mb-2">ðŸ¥ˆ</div>
                                <div className="text-sm text-gray-500 uppercase font-semibold">Runner Up</div>
                                <div className="text-xl font-black text-gray-900">{data.playoffs.second}</div>
                            </div>
                        )}
                        {data.playoffs.third && (
                            <div className="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-5 text-center border-2 border-orange-300">
                                <div className="text-4xl mb-2">ðŸ¥‰</div>
                                <div className="text-sm text-gray-500 uppercase font-semibold">Third Place</div>
                                <div className="text-xl font-black text-gray-900">{data.playoffs.third}</div>
                            </div>
                        )}
                        {data.playoffs.tpf && (
                            <div className="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 text-center border-2 border-purple-300">
                                <div className="text-4xl mb-2">ðŸ“Š</div>
                                <div className="text-sm text-gray-500 uppercase font-semibold">TPF Winner</div>
                                <div className="text-xl font-black text-gray-900">{data.playoffs.tpf}</div>
                            </div>
                        )}
                    </div>
                </Card>
            )}

            {data.highLow && data.highLow.highTeam && (
                <Card title="Season High/Low Scores" emoji="ðŸ“ˆ">
                    <div className="grid md:grid-cols-2 gap-6">
                        <div className="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border-2 border-green-300">
                            <div className="flex items-center gap-2 text-green-600 font-bold text-sm uppercase mb-3">
                                ðŸ“ˆ Season High
                            </div>
                            <div className="text-3xl font-black text-gray-900 mb-1">{data.highLow.highScore}</div>
                            <div className="text-lg text-gray-700">{data.highLow.highTeam}</div>
                            <div className="text-sm text-gray-500">Week {data.highLow.highWeek}</div>
                        </div>
                        <div className="bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-6 border-2 border-red-300">
                            <div className="flex items-center gap-2 text-red-600 font-bold text-sm uppercase mb-3">
                                ðŸ“‰ Season Low
                            </div>
                            <div className="text-3xl font-black text-gray-900 mb-1">{data.highLow.lowScore}</div>
                            <div className="text-lg text-gray-700">{data.highLow.lowTeam}</div>
                            <div className="text-sm text-gray-500">Week {data.highLow.lowWeek}</div>
                        </div>
                    </div>
                </Card>
            )}
        </div>
    );
};

// Admin Page
const AdminPage = ({ isLoggedIn, setIsLoggedIn, data, refreshData }) => {
    const [password, setPassword] = useState('');
    const [error, setError] = useState('');
    const [editingYear, setEditingYear] = useState(null);
    const [editingData, setEditingData] = useState(null);
    const [saving, setSaving] = useState(false);
    const [message, setMessage] = useState('');

    const handleLogin = () => {
        if (password === ADMIN_PASSWORD) {
            setIsLoggedIn(true);
            setError('');
        } else {
            setError('Incorrect password');
        }
    };

    const handleSaveSeason = async () => {
        setSaving(true);
        try {
            await dataService.updateSeason(editingYear, editingData);
            setMessage('Season saved successfully!');
            setEditingYear(null);
            setEditingData(null);
            refreshData();
        } catch (e) {
            setMessage('Error saving: ' + e.message);
        }
        setSaving(false);
        setTimeout(() => setMessage(''), 3000);
    };

    const handleAddSeason = () => {
        const newYear = prompt('Enter the year for the new season (e.g., 2026):');
        if (newYear && /^\d{4}$/.test(newYear)) {
            const emptyData = {
                standings: Array(10).fill(null).map((_, i) => ({
                    rank: i + 1, name: '', w: 0, l: 0, pf: 0, pa: 0, playoffWins: 0, playoffLosses: 0
                })),
                playoffs: { first: '', second: '', third: '', tpf: '' },
                highLow: { highTeam: '', highScore: 0, highWeek: 0, lowTeam: '', lowScore: 0, lowWeek: 0 }
            };
            setEditingYear(newYear);
            setEditingData(emptyData);
        }
    };

    const handleDeleteSeason = async (year) => {
        if (confirm(`Are you sure you want to delete the ${year} season?`)) {
            await dataService.deleteSeason(year);
            refreshData();
            setMessage(`${year} season deleted.`);
            setTimeout(() => setMessage(''), 3000);
        }
    };

    if (!isLoggedIn) {
        return (
            <Card title="Admin Login" emoji="ðŸ”’">
                <div className="max-w-md mx-auto space-y-4">
                    <p className="text-gray-600 text-center">Enter the admin password to manage league data.</p>
                    <input
                        type="password"
                        value={password}
                        onChange={(e) => setPassword(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                        placeholder="Password"
                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none transition-colors"
                    />
                    {error && <p className="text-red-500 text-center">{error}</p>}
                    <button
                        onClick={handleLogin}
                        className="w-full bg-red-600 text-white py-3 rounded-xl font-bold hover:bg-red-700 transition-colors"
                    >
                        ðŸ”“ Login
                    </button>
                    
                </div>
            </Card>
        );
    }

    return (
        <div className="space-y-6">
            {message && (
                <div className="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl">
                    {message}
                </div>
            )}

            <div className="flex items-center justify-between">
                <h2 className="text-2xl font-bold text-gray-900">Admin Dashboard</h2>
                <button
                    onClick={() => setIsLoggedIn(false)}
                    className="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                >
                    ðŸšª Logout
                </button>
            </div>

            <Card title="Manage Seasons" emoji="ðŸ“…">
                {editingYear ? (
                    <div className="space-y-6">
                        <div className="flex items-center justify-between border-b pb-4">
                            <h3 className="text-xl font-bold">Editing {editingYear} Season</h3>
                            <div className="flex gap-2">
                                <button
                                    onClick={() => { setEditingYear(null); setEditingData(null); }}
                                    className="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"
                                >
                                    Cancel
                                </button>
                                <button
                                    onClick={handleSaveSeason}
                                    disabled={saving}
                                    className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50"
                                >
                                    {saving ? 'Saving...' : 'ðŸ’¾ Save'}
                                </button>
                            </div>
                        </div>

                        {/* Standings Editor */}
                        <div>
                            <h4 className="font-bold text-gray-900 mb-3">Standings</h4>
                            <div className="overflow-x-auto">
                                <table className="w-full text-sm">
                                    <thead>
                                        <tr className="bg-gray-100">
                                            <th className="px-2 py-2">#</th>
                                            <th className="px-2 py-2">Name</th>
                                            <th className="px-2 py-2">W</th>
                                            <th className="px-2 py-2">L</th>
                                            <th className="px-2 py-2">PF</th>
                                            <th className="px-2 py-2">PA</th>
                                            <th className="px-2 py-2">PO W</th>
                                            <th className="px-2 py-2">PO L</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {editingData.standings.map((row, i) => (
                                            <tr key={i} className="border-b">
                                                <td className="px-2 py-2 text-center">{i + 1}</td>
                                                {['name', 'w', 'l', 'pf', 'pa', 'playoffWins', 'playoffLosses'].map(field => (
                                                    <td key={field} className="px-1 py-1">
                                                        <input
                                                            type={field === 'name' ? 'text' : 'number'}
                                                            value={row[field]}
                                                            onChange={(e) => {
                                                                const newStandings = [...editingData.standings];
                                                                newStandings[i] = {
                                                                    ...newStandings[i],
                                                                    [field]: field === 'name' ? e.target.value : parseFloat(e.target.value) || 0
                                                                };
                                                                setEditingData({ ...editingData, standings: newStandings });
                                                            }}
                                                            className="w-full px-2 py-1 border rounded text-center"
                                                            step={field === 'pf' || field === 'pa' ? '0.01' : '1'}
                                                        />
                                                    </td>
                                                ))}
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        {/* Playoffs Editor */}
                        <div>
                            <h4 className="font-bold text-gray-900 mb-3">Playoff Results</h4>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                {['first', 'second', 'third', 'tpf'].map(place => (
                                    <div key={place}>
                                        <label className="block text-sm text-gray-600 mb-1 capitalize">
                                            {place === 'tpf' ? 'TPF Winner' : place}
                                        </label>
                                        <input
                                            type="text"
                                            value={editingData.playoffs[place]}
                                            onChange={(e) => setEditingData({
                                                ...editingData,
                                                playoffs: { ...editingData.playoffs, [place]: e.target.value }
                                            })}
                                            className="w-full px-3 py-2 border rounded-lg"
                                        />
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* High/Low Editor */}
                        <div>
                            <h4 className="font-bold text-gray-900 mb-3">High/Low Scores</h4>
                            <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                                {[
                                    ['highTeam', 'High Team', 'text'],
                                    ['highScore', 'High Score', 'number'],
                                    ['highWeek', 'High Week', 'number'],
                                    ['lowTeam', 'Low Team', 'text'],
                                    ['lowScore', 'Low Score', 'number'],
                                    ['lowWeek', 'Low Week', 'number'],
                                ].map(([field, label, type]) => (
                                    <div key={field}>
                                        <label className="block text-sm text-gray-600 mb-1">{label}</label>
                                        <input
                                            type={type}
                                            step={type === 'number' ? '0.01' : undefined}
                                            value={editingData.highLow[field]}
                                            onChange={(e) => setEditingData({
                                                ...editingData,
                                                highLow: { 
                                                    ...editingData.highLow, 
                                                    [field]: type === 'number' ? parseFloat(e.target.value) || 0 : e.target.value 
                                                }
                                            })}
                                            className="w-full px-3 py-2 border rounded-lg"
                                        />
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                ) : (
                    <div className="space-y-4">
                        <button
                            onClick={handleAddSeason}
                            className="px-4 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors"
                        >
                            âž• Add New Season
                        </button>
                        
                        <div className="grid gap-3">
                            {data.years.map(year => (
                                <div key={year} className="flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                                    <span className="font-bold text-gray-900">{year} Season</span>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={async () => {
                                                const seasonData = await dataService.getSeason(year);
                                                setEditingYear(year);
                                                setEditingData(seasonData);
                                            }}
                                            className="px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors"
                                        >
                                            âœï¸ Edit
                                        </button>
                                        <button
                                            onClick={() => handleDeleteSeason(year)}
                                            className="px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors"
                                        >
                                            ðŸ—‘ï¸ Delete
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                )}
            </Card>

            <Card title="Firebase Setup" emoji="ðŸ”¥">
                <div className="prose prose-sm max-w-none">
                    <p className="text-gray-600 mb-4">
                        Currently using <strong>local browser storage</strong>. To enable cloud sync with Firebase:
                    </p>
                    <ol className="list-decimal list-inside space-y-2 text-gray-700">
                        <li>Go to <a href="https://console.firebase.google.com" className="text-red-600 hover:underline" target="_blank">Firebase Console</a></li>
                        <li>Create a new project</li>
                        <li>Enable Firestore Database</li>
                        <li>Add a Web app and copy the config</li>
                        <li>Edit this HTML file and replace the FIREBASE_CONFIG values</li>
                        <li>Set USE_FIREBASE = true</li>
                    </ol>
                    <div className="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <p className="text-sm text-yellow-800">
                            <strong>Note:</strong> Data is currently saved in your browser's localStorage. 
                            It will persist until you clear browser data.
                        </p>
                    </div>
                </div>
            </Card>
        </div>
    );
};

// ============================================
// MAIN APP
// ============================================
function App() {
    const [currentPage, setCurrentPage] = useState('home');
    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
    const [yearsOpen, setYearsOpen] = useState(false);
    const [isAdmin, setIsAdmin] = useState(false);
    const [loading, setLoading] = useState(true);
    
    const [data, setData] = useState({
        stats: [],
        finishes: [],
        records: [],
        notes: [],
        years: [],
        seasons: {}
    });

    const loadData = async () => {
        setLoading(true);
        try {
            const [stats, finishes, records, notes, years] = await Promise.all([
                dataService.getOverallStats(),
                dataService.getOverallFinishes(),
                dataService.getRecords(),
                dataService.getNotes(),
                dataService.getSeasons()
            ]);
            
            const seasons = {};
            for (const year of years) {
                seasons[year] = await dataService.getSeason(year);
            }
            
            setData({ stats, finishes, records, notes, years, seasons });
        } catch (error) {
            console.error('Error loading data:', error);
        }
        setLoading(false);
    };

    useEffect(() => {
        loadData();
    }, []);

    const navItems = [
        { id: 'home', label: 'Home', emoji: 'ðŸ ' },
        { id: 'records', label: 'Records', emoji: 'ðŸ…' },
        { id: 'finishes', label: 'Yearly Finishes', emoji: 'ðŸ“Š' },
    ];

    const renderPage = () => {
        if (loading) {
            return (
                <div className="flex items-center justify-center py-20">
                    <div className="text-center">
                        <div className="w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                        <p className="text-gray-600">Loading league data...</p>
                    </div>
                </div>
            );
        }

        if (currentPage === 'home') return <HomePage stats={data.stats} finishes={data.finishes} notes={data.notes} />;
        if (currentPage === 'records') return <RecordsPage records={data.records} />;
        if (currentPage === 'finishes') return <YearlyFinishesPage seasons={data.seasons} />;
        if (currentPage === 'admin') return <AdminPage isLoggedIn={isAdmin} setIsLoggedIn={setIsAdmin} data={data} refreshData={loadData} />;
        if (currentPage.startsWith('year-')) {
            const year = currentPage.replace('year-', '');
            return <SeasonPage year={year} data={data.seasons[year]} />;
        }
        return <HomePage stats={data.stats} finishes={data.finishes} notes={data.notes} />;
    };

    return (
        <div className="min-h-screen bg-gradient-to-br from-gray-100 via-gray-50 to-white">
            {/* Header */}
            <header className="gradient-bg text-white shadow-2xl relative overflow-hidden">
                <div className="absolute inset-0 bg-black/10"></div>
                <div className="relative container mx-auto px-4 py-6">
                    <div className="flex items-center justify-center gap-4">
                        <div className="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-lg">
                            <span className="text-3xl">ðŸˆ</span>
                        </div>
                        <div className="text-center">
                            <h1 className="text-3xl md:text-4xl font-black tracking-tight font-display">
                                STU LEAGUE
                            </h1>
                            <p className="text-red-100 text-sm tracking-widest uppercase">History & Records</p>
                        </div>
                        <div className="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-lg">
                            <span className="text-3xl">ðŸ†</span>
                        </div>
                    </div>
                </div>
            </header>

            {/* Navigation */}
            <nav className="bg-white shadow-lg sticky top-0 z-50 border-b-4 border-red-600">
                <div className="container mx-auto px-4">
                    <div className="flex items-center justify-between h-14">
                        {/* Mobile menu button */}
                        <button 
                            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                            className="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors"
                        >
                            â˜°
                        </button>

                        {/* Desktop Navigation */}
                        <div className="hidden md:flex items-center gap-1">
                            {navItems.map(item => (
                                <button
                                    key={item.id}
                                    onClick={() => setCurrentPage(item.id)}
                                    className={`nav-link flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all ${
                                        currentPage === item.id
                                            ? 'bg-red-600 text-white shadow-md'
                                            : 'text-gray-700 hover:bg-red-50 hover:text-red-600'
                                    }`}
                                >
                                    <span>{item.emoji}</span>
                                    {item.label}
                                </button>
                            ))}
                            
                            {/* Years Dropdown */}
                            <div className="relative">
                                <button
                                    onClick={() => setYearsOpen(!yearsOpen)}
                                    className={`nav-link flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all ${
                                        currentPage.startsWith('year-')
                                            ? 'bg-red-600 text-white shadow-md'
                                            : 'text-gray-700 hover:bg-red-50 hover:text-red-600'
                                    }`}
                                >
                                    ðŸ“… Seasons {yearsOpen ? 'â–²' : 'â–¼'}
                                </button>
                                
                                {yearsOpen && (
                                    <div className="absolute top-full left-0 mt-1 bg-white rounded-lg shadow-xl border border-gray-200 py-2 min-w-[160px] max-h-[400px] overflow-y-auto z-50">
                                        {data.years.map(year => (
                                            <button
                                                key={year}
                                                onClick={() => { setCurrentPage(`year-${year}`); setYearsOpen(false); }}
                                                className={`w-full text-left px-4 py-2 hover:bg-red-50 hover:text-red-600 transition-colors ${
                                                    currentPage === `year-${year}` ? 'bg-red-100 text-red-700 font-semibold' : 'text-gray-700'
                                                }`}
                                            >
                                                {year} Season
                                            </button>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Admin Toggle */}
                        <button
                            onClick={() => setCurrentPage('admin')}
                            className={`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all ${
                                currentPage === 'admin'
                                    ? 'bg-gray-800 text-white'
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }`}
                        >
                            âš™ï¸ <span className="hidden sm:inline">Admin</span>
                        </button>
                    </div>
                </div>

                {/* Mobile Menu */}
                {mobileMenuOpen && (
                    <div className="md:hidden border-t border-gray-200 bg-white">
                        <div className="px-4 py-3 space-y-1">
                            {navItems.map(item => (
                                <button
                                    key={item.id}
                                    onClick={() => { setCurrentPage(item.id); setMobileMenuOpen(false); }}
                                    className={`flex items-center gap-3 w-full px-4 py-3 rounded-lg font-semibold transition-all ${
                                        currentPage === item.id
                                            ? 'bg-red-600 text-white'
                                            : 'text-gray-700 hover:bg-red-50'
                                    }`}
                                >
                                    {item.emoji} {item.label}
                                </button>
                            ))}
                            <div className="border-t border-gray-200 pt-2 mt-2">
                                <p className="px-4 py-2 text-xs font-semibold text-gray-500 uppercase">Seasons</p>
                                <div className="max-h-48 overflow-y-auto">
                                    {data.years.map(year => (
                                        <button
                                            key={year}
                                            onClick={() => { setCurrentPage(`year-${year}`); setMobileMenuOpen(false); }}
                                            className={`w-full text-left px-4 py-2 rounded-lg ${
                                                currentPage === `year-${year}` ? 'bg-red-100 text-red-700 font-semibold' : 'text-gray-700'
                                            }`}
                                        >
                                            {year} Season
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                )}
            </nav>

            {/* Main Content */}
            <main className="container mx-auto px-4 py-8">
                {renderPage()}
            </main>

            {/* Footer */}
            <footer className="bg-gray-900 text-white py-8 mt-12">
                <div className="container mx-auto px-4 text-center">
                    <p className="text-gray-400">
                        ðŸˆ STU League â€¢ Est. 2013 â€¢ Fantasy Football ðŸ†
                    </p>
                    <p className="text-sm text-gray-500 mt-2">
                        Last updated: January 2026
                    </p>
                </div>
            </footer>
        </div>
    );
}

ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
