<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STU League - History & Records</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Sans+Pro:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Source Sans Pro', sans-serif; background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); min-height: 100vh; }
        
        /* Header */
        .header { background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%); color: white; padding: 1.5rem; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        .header-content { display: flex; align-items: center; justify-content: center; gap: 1rem; }
        .header-logo { width: 60px; height: 60px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); overflow: hidden; padding: 5px; }
        .header-logo img { width: 100%; height: 100%; object-fit: contain; }
        .header h1 { font-family: 'Bebas Neue', sans-serif; font-size: 2.5rem; letter-spacing: 2px; }
        .header p { font-size: 0.9rem; opacity: 0.9; letter-spacing: 3px; text-transform: uppercase; }
        
        /* Navigation */
        .nav { background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; border-bottom: 4px solid #c41e3a; }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; display: flex; justify-content: space-between; align-items: center; }
        .nav-links { display: flex; gap: 0.25rem; padding: 0.5rem 0; flex-wrap: wrap; }
        .nav-link { padding: 0.6rem 1rem; border-radius: 8px; text-decoration: none; color: #333; font-weight: 600; transition: all 0.2s; cursor: pointer; border: none; background: none; font-size: 1rem; font-family: inherit; }
        .nav-link:hover { background: #fff0f0; color: #c41e3a; }
        .nav-link.active { background: #c41e3a; color: white; }
        .nav-dropdown { position: relative; }
        .nav-dropdown-menu { position: absolute; top: 100%; left: 0; background: white; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); min-width: 160px; display: none; z-index: 200; max-height: 400px; overflow-y: auto; }
        .nav-dropdown-menu.show { display: block; }
        .nav-dropdown-menu a { display: block; padding: 0.75rem 1rem; color: #333; text-decoration: none; transition: all 0.2s; }
        .nav-dropdown-menu a:hover { background: #fff0f0; color: #c41e3a; }
        .admin-btn { background: #333; color: white; }
        .admin-btn:hover { background: #555; color: white; }
        .mobile-menu-btn { display: none; padding: 0.5rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; }
        
        /* Main Content */
        .main { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; }
        
        /* Cards */
        .card { background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); overflow: hidden; margin-bottom: 2rem; animation: fadeIn 0.3s ease; }
        .card-header { background: linear-gradient(135deg, #c41e3a 0%, #8b0000 100%); color: white; padding: 1rem 1.5rem; display: flex; align-items: center; gap: 0.75rem; }
        .card-header h2 { font-size: 1.25rem; font-weight: 700; }
        .card-body { padding: 1.5rem; }
        
        /* Tables */
        .table-wrapper { overflow-x: auto; border-radius: 12px; border: 1px solid #e0e0e0; }
        table { width: 100%; border-collapse: collapse; table-layout: auto; }
        th { background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%); color: white; padding: 0.75rem 0.5rem; font-size: 0.75rem; letter-spacing: 0.5px; cursor: pointer; white-space: nowrap; text-align: right; }
        th:first-child { text-align: left; }
        th:hover { background: linear-gradient(135deg, #444 0%, #333 100%); }
        td { padding: 0.75rem 0.5rem; border-bottom: 1px solid #eee; text-align: right; font-size: 0.9rem; }
        td:first-child { text-align: left; font-weight: 600; color: #222; }
        tr:hover { background: #fff8f8; }
        tr:nth-child(even) { background: #fafafa; }
        tr:nth-child(even):hover { background: #fff8f8; }
        .sort-arrow { margin-left: 4px; opacity: 0.7; }
        
        /* Record Cards */
        .records-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; }
        .record-card { padding: 1.25rem; border-radius: 12px; border: 2px solid; transition: all 0.2s; }
        .record-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .record-card.positive { border-color: #c8e6c9; background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); }
        .record-card.negative { border-color: #ffcdd2; background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%); }
        .record-label { font-size: 0.8rem; color: #666; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; }
        .record-team { font-size: 1.5rem; font-weight: 900; color: #222; margin: 0.25rem 0; }
        .record-details { display: flex; justify-content: space-between; align-items: center; }
        .record-year { color: #666; }
        .record-value { font-size: 1.25rem; font-weight: 700; }
        .record-card.positive .record-value { color: #2e7d32; }
        .record-card.negative .record-value { color: #c62828; }
        
        /* Yearly Finishes Grid */
        .finishes-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .finish-card { background: linear-gradient(135deg, #f8f8f8 0%, #eee 100%); border-radius: 12px; padding: 1.25rem; border: 1px solid #ddd; transition: all 0.2s; }
        .finish-card:hover { box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .finish-year { font-size: 1.5rem; font-weight: 900; color: #c41e3a; border-bottom: 2px solid #ffcdd2; padding-bottom: 0.5rem; margin-bottom: 0.75rem; }
        .finish-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.25rem 0; }
        .finish-emoji { font-size: 1.25rem; }
        .finish-name { font-weight: 600; }
        .finish-tpf { margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #ddd; font-size: 0.9rem; color: #666; }
        
        /* Playoff Results */
        .playoff-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem; }
        .playoff-card { text-align: center; padding: 1.25rem; border-radius: 12px; border: 2px solid; }
        .playoff-card.gold { background: linear-gradient(135deg, #fffde7 0%, #fff59d 100%); border-color: #ffd54f; }
        .playoff-card.silver { background: linear-gradient(135deg, #fafafa 0%, #e0e0e0 100%); border-color: #bdbdbd; }
        .playoff-card.bronze { background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%); border-color: #ffb74d; }
        .playoff-card.tpf { background: linear-gradient(135deg, #f3e5f5 0%, #ce93d8 100%); border-color: #ba68c8; }
        .playoff-emoji { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .playoff-label { font-size: 0.75rem; color: #666; text-transform: uppercase; font-weight: 600; }
        .playoff-name { font-size: 1.25rem; font-weight: 900; color: #222; }
        
        /* High/Low Scores */
        .highlows { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .highlow-card { padding: 1.5rem; border-radius: 12px; border: 2px solid; }
        .highlow-card.high { background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border-color: #81c784; }
        .highlow-card.low { background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%); border-color: #e57373; }
        .highlow-label { font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.75rem; }
        .highlow-card.high .highlow-label { color: #2e7d32; }
        .highlow-card.low .highlow-label { color: #c62828; }
        .highlow-score { font-size: 2rem; font-weight: 900; color: #222; }
        .highlow-team { font-size: 1.1rem; color: #444; margin-top: 0.25rem; }
        .highlow-week { font-size: 0.9rem; color: #666; }
        
        /* Notes List */
        .notes-list { list-style: none; }
        .notes-list li { padding: 0.75rem 1rem; background: #f8f8f8; border-radius: 8px; margin-bottom: 0.5rem; display: flex; align-items: flex-start; gap: 0.75rem; }
        .notes-list li::before { content: "‚Ä¢"; color: #c41e3a; font-weight: bold; font-size: 1.2rem; }
        
        /* Admin */
        .admin-login { max-width: 400px; margin: 2rem auto; text-align: center; }
        .admin-login input { width: 100%; padding: 1rem; border: 2px solid #ddd; border-radius: 12px; font-size: 1rem; margin-bottom: 1rem; }
        .admin-login input:focus { outline: none; border-color: #c41e3a; }
        .admin-login button { width: 100%; padding: 1rem; background: #c41e3a; color: white; border: none; border-radius: 12px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.2s; }
        .admin-login button:hover { background: #a01830; }
        .error-msg { color: #c41e3a; margin-bottom: 1rem; }
        
        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .admin-header h2 { font-size: 1.5rem; font-weight: 700; }
        .btn { padding: 0.6rem 1.2rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; font-size: 0.9rem; }
        .btn-primary { background: #c41e3a; color: white; }
        .btn-primary:hover { background: #a01830; }
        .btn-secondary { background: #eee; color: #333; }
        .btn-secondary:hover { background: #ddd; }
        .btn-success { background: #4caf50; color: white; }
        .btn-success:hover { background: #388e3c; }
        .btn-danger { background: #f44336; color: white; }
        .btn-danger:hover { background: #d32f2f; }
        
        .season-list { display: flex; flex-direction: column; gap: 0.75rem; }
        .season-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.25rem; background: #f8f8f8; border-radius: 12px; }
        .season-item:hover { background: #f0f0f0; }
        .season-name { font-weight: 700; font-size: 1.1rem; }
        .season-actions { display: flex; gap: 0.5rem; }
        
        .edit-form input, .edit-form select { padding: 0.5rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.9rem; }
        .edit-form input:focus { outline: none; border-color: #c41e3a; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 0.5rem; margin-bottom: 1rem; }
        .form-section { margin-bottom: 1.5rem; }
        .form-section h4 { margin-bottom: 0.75rem; font-weight: 700; color: #333; }
        .form-row { display: flex; gap: 0.5rem; margin-bottom: 0.5rem; align-items: center; }
        .form-row label { min-width: 80px; font-size: 0.85rem; color: #666; }
        .form-row input { flex: 1; }
        
        .message { padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
        .message.success { background: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7; }
        
        /* Footer */
        .footer { background: #1a1a1a; color: white; padding: 2rem; text-align: center; margin-top: 3rem; }
        .footer p { opacity: 0.7; }
        
        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Mobile */
        @media (max-width: 768px) {
            .header h1 { font-size: 1.75rem; }
            .nav-links { display: none; }
            .nav-links.show { display: flex; flex-direction: column; position: absolute; top: 100%; left: 0; right: 0; background: white; padding: 1rem; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
            .mobile-menu-btn { display: block; }
            .nav-dropdown-menu { position: static; box-shadow: none; background: #f8f8f8; margin-top: 0.5rem; border-radius: 8px; }
            th, td { padding: 0.5rem 0.35rem; font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="header-logo"><img src="logo.png" alt="STU League"></div>
            <div>
                <h1>STU LEAGUE</h1>
                <p>History & Records</p>
            </div>
            <div class="header-logo"><img src="logo.png" alt="STU League"></div>
        </div>
    </header>

    <nav class="nav">
        <div class="nav-container">
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
            <div class="nav-links" id="navLinks">
                <button class="nav-link active" data-page="home">üè† Home</button>
                <button class="nav-link" data-page="records">üèÖ Records</button>
                <button class="nav-link" data-page="finishes">üìä Yearly Finishes</button>
                <div class="nav-dropdown">
                    <button class="nav-link" onclick="toggleDropdown(event)">üìÖ Seasons ‚ñº</button>
                    <div class="nav-dropdown-menu" id="seasonsDropdown"></div>
                </div>
            </div>
            <button class="nav-link admin-btn" data-page="admin">‚öôÔ∏è Admin</button>
        </div>
    </nav>

    <main class="main" id="content">
        <!-- Content loads here -->
    </main>

    <footer class="footer">
        <p>üèà STU League ‚Ä¢ Est. 2013 ‚Ä¢ Fantasy Football üèÜ</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem;">Last updated: January 2026</p>
    </footer>

    <script>
// ============================================
// DATA
// ============================================
const ADMIN_PASSWORD = "casablanca";

const DEFAULT_DATA = {
    overallStats: [
        { name: "Max", w: 91, l: 83, percent: 0.523, tpf: 22505.26, tpa: 22989.86, tpfSeason: 1875.44, tpaSeason: 1915.82, playoffWins: 13, playoffLosses: 8, playoffAppearances: 8, playoffWinPct: 0.619 },
        { name: "Jackson", w: 90, l: 84, percent: 0.517, tpf: 22238.74, tpa: 22374.22, tpfSeason: 1853.23, tpaSeason: 1864.52, playoffWins: 13, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.684 },
        { name: "Brad", w: 85, l: 89, percent: 0.489, tpf: 22515.74, tpa: 22129.04, tpfSeason: 1876.31, tpaSeason: 1844.09, playoffWins: 8, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.571 },
        { name: "Breeze", w: 94, l: 80, percent: 0.540, tpf: 22539.22, tpa: 22182.98, tpfSeason: 1878.27, tpaSeason: 1848.58, playoffWins: 13, playoffLosses: 4, playoffAppearances: 8, playoffWinPct: 0.765 },
        { name: "Bryan", w: 77, l: 97, percent: 0.443, tpf: 20935.46, tpa: 21693.12, tpfSeason: 1744.62, tpaSeason: 1807.76, playoffWins: 3, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.333 },
        { name: "Kalen", w: 80, l: 94, percent: 0.460, tpf: 22092.24, tpa: 22330.24, tpfSeason: 1841.02, tpaSeason: 1860.85, playoffWins: 11, playoffLosses: 6, playoffAppearances: 9, playoffWinPct: 0.647 },
        { name: "Dom", w: 83, l: 91, percent: 0.477, tpf: 21499.47, tpa: 21498.76, tpfSeason: 1791.62, tpaSeason: 1791.56, playoffWins: 6, playoffLosses: 8, playoffAppearances: 9, playoffWinPct: 0.429 },
        { name: "Aric", w: 82, l: 92, percent: 0.471, tpf: 21699.66, tpa: 21582.24, tpfSeason: 1808.30, tpaSeason: 1798.52, playoffWins: 7, playoffLosses: 7, playoffAppearances: 8, playoffWinPct: 0.500 },
        { name: "Drew", w: 89, l: 85, percent: 0.511, tpf: 21922.28, tpa: 22287.94, tpfSeason: 1826.86, tpaSeason: 1857.33, playoffWins: 8, playoffLosses: 9, playoffAppearances: 9, playoffWinPct: 0.471 },
        { name: "Wilson", w: 94, l: 66, percent: 0.588, tpf: 21341.72, tpa: 20075.44, tpfSeason: 1778.48, tpaSeason: 1672.95, playoffWins: 12, playoffLosses: 7, playoffAppearances: 8, playoffWinPct: 0.632 },
        { name: "Molidor & Volgi", w: 5, l: 9, percent: 0.357, tpf: 1634.20, tpa: 1779.06, tpfSeason: 136.18, tpaSeason: 148.26, playoffWins: 0, playoffLosses: 0, playoffAppearances: 0, playoffWinPct: 0 },
    ],
    overallFinishes: [
        { name: "Max", first: 2, second: 2, third: 1, tpf: 0, winnings: 1700 },
        { name: "Wilson", first: 2, second: 1, third: 1, tpf: 2, winnings: 1700 },
        { name: "Jackson", first: 2, second: 3, third: 1, tpf: 0, winnings: 1900 },
        { name: "Brad", first: 2, second: 1, third: 1, tpf: 1, winnings: 1600 },
        { name: "Breeze", first: 3, second: 0, third: 1, tpf: 3, winnings: 2200 },
        { name: "Bryan", first: 0, second: 1, third: 1, tpf: 0, winnings: 300 },
        { name: "Kalen", first: 1, second: 1, third: 3, tpf: 2, winnings: 1300 },
        { name: "Dom", first: 0, second: 1, third: 3, tpf: 1, winnings: 600 },
        { name: "Aric", first: 0, second: 2, third: 1, tpf: 3, winnings: 800 },
        { name: "Drew", first: 1, second: 1, third: 0, tpf: 1, winnings: 900 },
        { name: "Molidor & Volgi", first: 0, second: 0, third: 0, tpf: 0, winnings: 0 },
    ],
    records: [
        { record: "Most W's", team: "Kalen/Drew", yearWeek: "2015/2025", result: 12 },
        { record: "Most L's", team: "Bryan/Kalen", yearWeek: "2015/2013", result: 11 },
        { record: "Highest TPF", team: "Wilson", yearWeek: "2018", result: 2037.6 },
        { record: "Lowest TPF", team: "Bryan", yearWeek: "2015", result: 1420.4 },
        { record: "Weekly High", team: "Aric", yearWeek: "2014 Wk 8", result: 222.8 },
        { record: "Weekly Low", team: "Bryan", yearWeek: "2015 Wk 10", result: 52 },
        { record: "Playoff High", team: "Aric", yearWeek: "2022 R2", result: 220.6 },
        { record: "Playoff Low", team: "Bryan", yearWeek: "2019 R1", result: 72.26 },
    ],
    notes: [
        "2014 - Playoff teams reduced from 8 to 6",
        "2022 - Playoff W's column updated to include playoff BYE's as a Playoff W",
        "2022 - Added Playoff Win %age column",
        "2022 - Added Playoff High & Low records",
        "2025 - Wilson Dropped, Volgidor Added"
    ],
    seasons: {
        "2025": {
            standings: [
                { rank: 1, name: "Drew", w: 12, l: 2, pf: 1998.50, pa: 1676.84, playoffWins: 0, playoffLosses: 0 },
                { rank: 2, name: "Bryan", w: 10, l: 4, pf: 1877.80, pa: 1618.62, playoffWins: 0, playoffLosses: 0 },
                { rank: 3, name: "Kalen", w: 8, l: 6, pf: 1831.68, pa: 1743.20, playoffWins: 0, playoffLosses: 0 },
                { rank: 4, name: "Brad", w: 8, l: 6, pf: 1864.44, pa: 1727.94, playoffWins: 0, playoffLosses: 0 },
                { rank: 5, name: "Dom", w: 7, l: 7, pf: 1571.99, pa: 1593.88, playoffWins: 0, playoffLosses: 0 },
                { rank: 6, name: "Jackson", w: 6, l: 8, pf: 1744.00, pa: 1865.70, playoffWins: 0, playoffLosses: 0 },
                { rank: 7, name: "Breeze", w: 6, l: 8, pf: 1514.62, pa: 1695.46, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Molidor & Volgi", w: 5, l: 9, pf: 1634.20, pa: 1779.06, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Max", w: 4, l: 10, pf: 1624.92, pa: 1884.10, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Aric", w: 4, l: 10, pf: 1544.84, pa: 1622.10, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "", second: "", third: "", tpf: "Drew" },
            highLow: { highTeam: "", highScore: 0, highWeek: 0, lowTeam: "", lowScore: 0, lowWeek: 0 }
        },
        "2024": {
            standings: [
                { rank: 1, name: "Dom", w: 9, l: 5, pf: 1961.18, pa: 1760.10, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Max", w: 9, l: 5, pf: 1909.44, pa: 1776.32, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Wilson", w: 8, l: 6, pf: 1820.50, pa: 1795.10, playoffWins: 0, playoffLosses: 1 },
                { rank: 4, name: "Drew", w: 8, l: 6, pf: 1804.82, pa: 1775.10, playoffWins: 3, playoffLosses: 0 },
                { rank: 5, name: "Breeze", w: 8, l: 6, pf: 1801.00, pa: 1824.42, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Kalen", w: 8, l: 6, pf: 1749.96, pa: 1679.14, playoffWins: 2, playoffLosses: 1 },
                { rank: 7, name: "Jackson", w: 6, l: 8, pf: 1744.28, pa: 1783.44, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Brad", w: 5, l: 9, pf: 1701.42, pa: 1816.56, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Aric", w: 5, l: 9, pf: 1571.46, pa: 1670.48, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Bryan", w: 4, l: 10, pf: 1629.34, pa: 1812.74, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Drew", second: "Kalen", third: "Dom", tpf: "Dom" },
            highLow: { highTeam: "Max", highScore: 188.96, highWeek: 14, lowTeam: "Aric", lowScore: 77.50, lowWeek: 3 }
        },
        "2023": {
            standings: [
                { rank: 1, name: "Jackson", w: 10, l: 4, pf: 1930, pa: 1703, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Max", w: 9, l: 5, pf: 1805, pa: 1784, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Breeze", w: 9, l: 5, pf: 2027, pa: 1677, playoffWins: 3, playoffLosses: 0 },
                { rank: 4, name: "Brad", w: 9, l: 5, pf: 1866, pa: 1802, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Wilson", w: 7, l: 7, pf: 1741, pa: 1786, playoffWins: 1, playoffLosses: 1 },
                { rank: 6, name: "Aric", w: 7, l: 7, pf: 1661, pa: 1695, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Dom", w: 7, l: 7, pf: 1593, pa: 1587, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Bryan", w: 5, l: 9, pf: 1715, pa: 1771, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Drew", w: 4, l: 10, pf: 1650, pa: 1956, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 3, l: 11, pf: 1630, pa: 1856, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Breeze", second: "Jackson", third: "Max", tpf: "Breeze" },
            highLow: { highTeam: "Bryan", highScore: 212.38, highWeek: 5, lowTeam: "Kalen", lowScore: 74.50, lowWeek: 4 }
        },
        "2022": {
            standings: [
                { rank: 1, name: "Wilson", w: 11, l: 3, pf: 1979.94, pa: 1641.78, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Jackson", w: 11, l: 3, pf: 1959.22, pa: 1726.18, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Drew", w: 8, l: 6, pf: 1800.70, pa: 1680.90, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Aric", w: 7, l: 7, pf: 1848.12, pa: 1680.20, playoffWins: 2, playoffLosses: 1 },
                { rank: 5, name: "Dom", w: 6, l: 8, pf: 1488.34, pa: 1715.66, playoffWins: 1, playoffLosses: 1 },
                { rank: 6, name: "Max", w: 6, l: 8, pf: 1855.14, pa: 1781.90, playoffWins: 1, playoffLosses: 1 },
                { rank: 7, name: "Kalen", w: 6, l: 8, pf: 1795.90, pa: 1909.66, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Breeze", w: 5, l: 9, pf: 1669.88, pa: 1875.32, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Brad", w: 5, l: 9, pf: 1595.40, pa: 1771.28, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Bryan", w: 5, l: 9, pf: 1545.96, pa: 1755.72, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Jackson", second: "Aric", third: "Wilson", tpf: "Wilson" },
            highLow: { highTeam: "Wilson", highScore: 182.92, highWeek: 8, lowTeam: "Dom", lowScore: 68.80, lowWeek: 4 }
        },
        "2021": {
            standings: [
                { rank: 1, name: "Wilson", w: 10, l: 4, pf: 1904.80, pa: 1652.82, playoffWins: 3, playoffLosses: 0 },
                { rank: 2, name: "Max", w: 9, l: 5, pf: 1908.68, pa: 1830.84, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Dom", w: 8, l: 6, pf: 1828.28, pa: 1642.70, playoffWins: 2, playoffLosses: 1 },
                { rank: 4, name: "Jackson", w: 7, l: 7, pf: 1686.06, pa: 1690.78, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Aric", w: 7, l: 7, pf: 1744.10, pa: 1756.12, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Breeze", w: 7, l: 7, pf: 1778.32, pa: 1843.48, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Brad", w: 6, l: 8, pf: 1950.02, pa: 1952.64, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Drew", w: 6, l: 8, pf: 1770.70, pa: 1825.32, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Bryan", w: 6, l: 8, pf: 1650.54, pa: 1817.26, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 4, l: 10, pf: 1777.90, pa: 1987.44, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Wilson", second: "Dom", third: "Jackson", tpf: "Brad" },
            highLow: { highTeam: "Aric", highScore: 188.10, highWeek: 13, lowTeam: "Kalen", lowScore: 56.72, lowWeek: 1 }
        },
        "2020": {
            standings: [
                { rank: 1, name: "Breeze", w: 11, l: 2, pf: 1786.90, pa: 1511.50, playoffWins: 3, playoffLosses: 0 },
                { rank: 2, name: "Max", w: 9, l: 4, pf: 1679.48, pa: 1771.10, playoffWins: 2, playoffLosses: 1 },
                { rank: 3, name: "Wilson", w: 8, l: 5, pf: 1842.78, pa: 1634.14, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Drew", w: 7, l: 6, pf: 1735.66, pa: 1641.58, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 6, l: 7, pf: 1720.26, pa: 1642.82, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Bryan", w: 6, l: 7, pf: 1659.32, pa: 1677.88, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Aric", w: 5, l: 8, pf: 1532.24, pa: 1658.74, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Dom", w: 5, l: 8, pf: 1617.28, pa: 1673.12, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Jackson", w: 4, l: 9, pf: 1656.48, pa: 1879.82, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 4, l: 9, pf: 1622.40, pa: 1762.10, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Max", second: "Brad", third: "Breeze", tpf: "Breeze" },
            highLow: { highTeam: "Bryan", highScore: 196.70, highWeek: 12, lowTeam: "Bryan", lowScore: 80.84, lowWeek: 6 }
        },
        "2019": {
            standings: [
                { rank: 1, name: "Breeze", w: 10, l: 3, pf: 1880.3, pa: 1597.9, playoffWins: 3, playoffLosses: 0 },
                { rank: 2, name: "Aric", w: 9, l: 4, pf: 1925.0, pa: 1622.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Max", w: 9, l: 4, pf: 1749.5, pa: 1625.6, playoffWins: 2, playoffLosses: 1 },
                { rank: 4, name: "Bryan", w: 8, l: 5, pf: 1608.6, pa: 1558.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 6, l: 7, pf: 1642.4, pa: 1772.2, playoffWins: 1, playoffLosses: 1 },
                { rank: 6, name: "Drew", w: 6, l: 7, pf: 1581.5, pa: 1699.1, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Jackson", w: 5, l: 8, pf: 1545.4, pa: 1721.2, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Wilson", w: 5, l: 8, pf: 1594.2, pa: 1716.7, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Dom", w: 4, l: 9, pf: 1665.0, pa: 1679.2, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 3, l: 10, pf: 1530.1, pa: 1729.0, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Breeze", second: "Max", third: "Brad", tpf: "Aric" },
            highLow: { highTeam: "Breeze", highScore: 194.3, highWeek: 5, lowTeam: "Brad", lowScore: 72.3, lowWeek: 11 }
        },
        "2018": {
            standings: [
                { rank: 1, name: "Wilson", w: 10, l: 3, pf: 2037.6, pa: 1685.0, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Jackson", w: 9, l: 4, pf: 1949.1, pa: 1790.3, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Dom", w: 8, l: 5, pf: 1865.5, pa: 1790.5, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Kalen", w: 7, l: 6, pf: 1801.3, pa: 1748.5, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 7, l: 6, pf: 1757.0, pa: 1777.9, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Drew", w: 6, l: 7, pf: 1804.1, pa: 1767.3, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Max", w: 5, l: 8, pf: 1719.2, pa: 1953.2, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Bryan", w: 5, l: 8, pf: 1461.3, pa: 1583.3, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Breeze", w: 5, l: 8, pf: 1536.6, pa: 1698.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Aric", w: 3, l: 10, pf: 1649.2, pa: 1786.3, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Jackson", second: "Wilson", third: "Dom", tpf: "Wilson" },
            highLow: { highTeam: "Wilson", highScore: 207.4, highWeek: 7, lowTeam: "Aric", lowScore: 76.2, lowWeek: 12 }
        },
        "2017": {
            standings: [
                { rank: 1, name: "Brad", w: 10, l: 3, pf: 1645.1, pa: 1393.3, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Bryan", w: 8, l: 5, pf: 1664.1, pa: 1526.0, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Kalen", w: 8, l: 5, pf: 1680.1, pa: 1579.7, playoffWins: 3, playoffLosses: 0 },
                { rank: 4, name: "Jackson", w: 7, l: 6, pf: 1650.6, pa: 1592.3, playoffWins: 2, playoffLosses: 1 },
                { rank: 5, name: "Drew", w: 7, l: 6, pf: 1446.7, pa: 1546.4, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Breeze", w: 7, l: 6, pf: 1618.5, pa: 1503.8, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Dom", w: 5, l: 8, pf: 1557.1, pa: 1619.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Max", w: 5, l: 8, pf: 1517.0, pa: 1604.9, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Aric", w: 4, l: 9, pf: 1476.5, pa: 1767.8, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Wilson", w: 4, l: 9, pf: 1479.7, pa: 1601.4, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Kalen", second: "Jackson", third: "Bryan", tpf: "Kalen" },
            highLow: { highTeam: "Brad", highScore: 168.9, highWeek: 7, lowTeam: "Max", lowScore: 67.0, lowWeek: 13 }
        },
        "2016": {
            standings: [
                { rank: 1, name: "Aric", w: 10, l: 3, pf: 1818.6, pa: 1564.1, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Wilson", w: 10, l: 3, pf: 1716.0, pa: 1540.4, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Breeze", w: 9, l: 4, pf: 1789.8, pa: 1686.6, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Kalen", w: 7, l: 6, pf: 1638.9, pa: 1573.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Jackson", w: 6, l: 7, pf: 1688.5, pa: 1672.7, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Dom", w: 6, l: 7, pf: 1568.8, pa: 1501.9, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Drew", w: 5, l: 8, pf: 1611.9, pa: 1786.8, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Bryan", w: 5, l: 8, pf: 1454.2, pa: 1722.6, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Max", w: 4, l: 9, pf: 1648.9, pa: 1762.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Brad", w: 3, l: 10, pf: 1579.3, pa: 1703.7, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Wilson", second: "Aric", third: "Kalen", tpf: "Aric" },
            highLow: { highTeam: "Aric", highScore: 189.7, highWeek: 10, lowTeam: "Kalen", lowScore: 78.9, lowWeek: 6 }
        },
        "2015": {
            standings: [
                { rank: 1, name: "Kalen", w: 12, l: 1, pf: 1840.4, pa: 1460.4, playoffWins: 1, playoffLosses: 1 },
                { rank: 2, name: "Aric", w: 9, l: 4, pf: 1579.3, pa: 1452.0, playoffWins: 1, playoffLosses: 1 },
                { rank: 3, name: "Drew", w: 8, l: 5, pf: 1646.4, pa: 1619.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 4, name: "Dom", w: 7, l: 6, pf: 1521.5, pa: 1611.6, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Brad", w: 7, l: 6, pf: 1801.3, pa: 1515.4, playoffWins: 3, playoffLosses: 0 },
                { rank: 6, name: "Max", w: 6, l: 7, pf: 1650.4, pa: 1757.1, playoffWins: 2, playoffLosses: 1 },
                { rank: 7, name: "Wilson", w: 6, l: 7, pf: 1748.0, pa: 1738.4, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Jackson", w: 4, l: 9, pf: 1429.3, pa: 1599.6, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Breeze", w: 4, l: 9, pf: 1643.3, pa: 1825.0, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Bryan", w: 2, l: 11, pf: 1420.4, pa: 1701.4, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Brad", second: "Max", third: "Kalen", tpf: "Kalen" },
            highLow: { highTeam: "Brad", highScore: 189.2, highWeek: 9, lowTeam: "Bryan", lowScore: 52.0, lowWeek: 10 }
        },
        "2014": {
            standings: [
                { rank: 1, name: "Drew", w: 8, l: 5, pf: 1571.8, pa: 1617.7, playoffWins: 2, playoffLosses: 1 },
                { rank: 2, name: "Max", w: 8, l: 5, pf: 1676.8, pa: 1766.8, playoffWins: 3, playoffLosses: 0 },
                { rank: 3, name: "Aric", w: 7, l: 6, pf: 1736.8, pa: 1629.8, playoffWins: 1, playoffLosses: 1 },
                { rank: 4, name: "Wilson", w: 7, l: 6, pf: 1728.7, pa: 1604.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 5, name: "Jackson", w: 7, l: 6, pf: 1579.1, pa: 1581.7, playoffWins: 0, playoffLosses: 1 },
                { rank: 6, name: "Bryan", w: 7, l: 6, pf: 1625.6, pa: 1547.6, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Brad", w: 6, l: 7, pf: 1669.3, pa: 1629.6, playoffWins: 0, playoffLosses: 0 },
                { rank: 8, name: "Breeze", w: 6, l: 7, pf: 1705.1, pa: 1726.5, playoffWins: 0, playoffLosses: 0 },
                { rank: 9, name: "Dom", w: 5, l: 8, pf: 1667.7, pa: 1718.9, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Kalen", w: 4, l: 9, pf: 1573.0, pa: 1710.7, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Max", second: "Drew", third: "Aric", tpf: "Aric" },
            highLow: { highTeam: "Aric", highScore: 222.8, highWeek: 8, lowTeam: "Kalen", lowScore: 78.4, lowWeek: 3 }
        },
        "2013": {
            standings: [
                { rank: 1, name: "Max", w: 8, l: 5, pf: 1760.8, pa: 1691.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 2, name: "Wilson", w: 8, l: 5, pf: 1748.5, pa: 1679.0, playoffWins: 0, playoffLosses: 1 },
                { rank: 3, name: "Jackson", w: 8, l: 5, pf: 1676.7, pa: 1767.5, playoffWins: 2, playoffLosses: 1 },
                { rank: 4, name: "Brad", w: 7, l: 6, pf: 1723.8, pa: 1623.7, playoffWins: 0, playoffLosses: 1 },
                { rank: 5, name: "Breeze", w: 7, l: 6, pf: 1787.9, pa: 1717.5, playoffWins: 3, playoffLosses: 0 },
                { rank: 6, name: "Bryan", w: 6, l: 7, pf: 1623.3, pa: 1600.5, playoffWins: 0, playoffLosses: 1 },
                { rank: 7, name: "Kalen", w: 6, l: 7, pf: 1620.6, pa: 1590.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 8, name: "Dom", w: 6, l: 7, pf: 1593.8, pa: 1604.7, playoffWins: 1, playoffLosses: 1 },
                { rank: 9, name: "Aric", w: 5, l: 8, pf: 1612.5, pa: 1676.9, playoffWins: 0, playoffLosses: 0 },
                { rank: 10, name: "Drew", w: 4, l: 9, pf: 1499.5, pa: 1695.4, playoffWins: 0, playoffLosses: 0 },
            ],
            playoffs: { first: "Breeze", second: "Jackson", third: "Dom", tpf: "Breeze" },
            highLow: { highTeam: "Bryan", highScore: 196.0, highWeek: 1, lowTeam: "Dom", lowScore: 75.3, lowWeek: 3 }
        }
    }
};

// Load data from localStorage or use default
let data = JSON.parse(localStorage.getItem('stuLeagueData')) || JSON.parse(JSON.stringify(DEFAULT_DATA));
let currentPage = 'home';
let isAdminLoggedIn = false;
let currentSort = { col: null, dir: 'desc' };

// Save data to localStorage
function saveData() {
    localStorage.setItem('stuLeagueData', JSON.stringify(data));
}

// Get years sorted descending
function getYears() {
    return Object.keys(data.seasons).sort((a, b) => b - a);
}

// ============================================
// NAVIGATION
// ============================================
function initNav() {
    // Build seasons dropdown
    const dropdown = document.getElementById('seasonsDropdown');
    dropdown.innerHTML = getYears().map(year => 
        `<a href="#" data-page="year-${year}">${year} Season</a>`
    ).join('');
    
    // Add click handlers
    document.querySelectorAll('.nav-link[data-page], .nav-dropdown-menu a[data-page]').forEach(el => {
        el.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo(el.dataset.page);
            document.getElementById('seasonsDropdown').classList.remove('show');
            document.getElementById('navLinks').classList.remove('show');
        });
    });
}

function navigateTo(page) {
    currentPage = page;
    currentSort = { col: null, dir: 'desc' };
    
    // Update active nav
    document.querySelectorAll('.nav-link').forEach(el => {
        el.classList.remove('active');
        if (el.dataset.page === page) el.classList.add('active');
        if (page.startsWith('year-') && el.textContent.includes('Seasons')) el.classList.add('active');
    });
    
    render();
}

function toggleDropdown(e) {
    e.stopPropagation();
    document.getElementById('seasonsDropdown').classList.toggle('show');
}

function toggleMobileMenu() {
    document.getElementById('navLinks').classList.toggle('show');
}

// Close dropdown when clicking outside
document.addEventListener('click', () => {
    document.getElementById('seasonsDropdown').classList.remove('show');
});

// ============================================
// RENDERING
// ============================================
function render() {
    const content = document.getElementById('content');
    
    if (currentPage === 'home') {
        content.innerHTML = renderHome();
    } else if (currentPage === 'records') {
        content.innerHTML = renderRecords();
    } else if (currentPage === 'finishes') {
        content.innerHTML = renderFinishes();
    } else if (currentPage === 'admin') {
        content.innerHTML = renderAdmin();
    } else if (currentPage.startsWith('year-')) {
        const year = currentPage.replace('year-', '');
        content.innerHTML = renderSeason(year);
    }
    
    // Add table sort handlers
    document.querySelectorAll('th[data-col]').forEach(th => {
        th.addEventListener('click', () => sortTable(th.dataset.col, th.closest('table')));
    });
}

function renderHome() {
    return `
        <div class="card">
            <div class="card-header"><span>üìä</span><h2>Overall Stats</h2></div>
            <div class="card-body">
                <div class="table-wrapper">
                    ${renderStatsTable(data.overallStats)}
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header"><span>üèÜ</span><h2>Overall Finishes</h2></div>
            <div class="card-body">
                <div class="table-wrapper">
                    ${renderFinishesTable(data.overallFinishes)}
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header"><span>üìù</span><h2>League Updates & Notes</h2></div>
            <div class="card-body">
                <ul class="notes-list">
                    ${data.notes.map(note => `<li>${note}</li>`).join('')}
                </ul>
            </div>
        </div>
    `;
}

function renderStatsTable(stats) {
    const sorted = sortData([...stats], currentSort);
    return `
        <table>
            <thead>
                <tr>
                    <th data-col="name">MANAGER ${sortArrow('name')}</th>
                    <th data-col="w">W ${sortArrow('w')}</th>
                    <th data-col="l">L ${sortArrow('l')}</th>
                    <th data-col="percent">WIN% ${sortArrow('percent')}</th>
                    <th data-col="tpf">TPF ${sortArrow('tpf')}</th>
                    <th data-col="tpfSeason">TPF/SZN ${sortArrow('tpfSeason')}</th>
                    <th data-col="playoffWins">PLAYOFF WINS ${sortArrow('playoffWins')}</th>
                    <th data-col="playoffLosses">PLAYOFF LOSSES ${sortArrow('playoffLosses')}</th>
                    <th data-col="playoffAppearances">PLAYOFF APPEARANCES ${sortArrow('playoffAppearances')}</th>
                    <th data-col="playoffWinPct">PLAYOFF WIN % ${sortArrow('playoffWinPct')}</th>
                </tr>
            </thead>
            <tbody>
                ${sorted.map(row => `
                    <tr>
                        <td>${row.name}</td>
                        <td>${row.w}</td>
                        <td>${row.l}</td>
                        <td>${(row.percent * 100).toFixed(1)}%</td>
                        <td>${row.tpf.toLocaleString(undefined, {minimumFractionDigits: 2})}</td>
                        <td>${row.tpfSeason.toFixed(2)}</td>
                        <td>${row.playoffWins}</td>
                        <td>${row.playoffLosses}</td>
                        <td>${row.playoffAppearances}</td>
                        <td>${(row.playoffWinPct * 100).toFixed(1)}%</td>
                    </tr>
                `).join('')}
            </tbody>
        </table>
    `;
}

function renderFinishesTable(finishes) {
    const sorted = sortData([...finishes], currentSort);
    return `
        <table>
            <thead>
                <tr>
                    <th data-col="name">MANAGER ${sortArrow('name')}</th>
                    <th data-col="first">ü•á 1ST ${sortArrow('first')}</th>
                    <th data-col="second">ü•à 2ND ${sortArrow('second')}</th>
                    <th data-col="third">ü•â 3RD ${sortArrow('third')}</th>
                    <th data-col="tpf">TPF ${sortArrow('tpf')}</th>
                    <th data-col="winnings">WINNINGS ${sortArrow('winnings')}</th>
                </tr>
            </thead>
            <tbody>
                ${sorted.map(row => `
                    <tr>
                        <td>${row.name}</td>
                        <td>${row.first}</td>
                        <td>${row.second}</td>
                        <td>${row.third}</td>
                        <td>${row.tpf}</td>
                        <td>$${row.winnings.toLocaleString()}</td>
                    </tr>
                `).join('')}
            </tbody>
        </table>
    `;
}

function renderRecords() {
    return `
        <div class="card">
            <div class="card-header"><span>üèÖ</span><h2>League Records</h2></div>
            <div class="card-body">
                <div class="records-grid">
                    ${data.records.map(r => {
                        const isPositive = r.record.includes('High') || r.record.includes('Most W');
                        return `
                            <div class="record-card ${isPositive ? 'positive' : 'negative'}">
                                <div class="record-label">${r.record}</div>
                                <div class="record-team">${r.team}</div>
                                <div class="record-details">
                                    <span class="record-year">${r.yearWeek}</span>
                                    <span class="record-value">${typeof r.result === 'number' ? r.result.toLocaleString() : r.result}</span>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            </div>
        </div>
    `;
}

function renderFinishes() {
    return `
        <div class="card">
            <div class="card-header"><span>üìÖ</span><h2>Yearly Finishes</h2></div>
            <div class="card-body">
                <div class="finishes-grid">
                    ${getYears().map(year => {
                        const s = data.seasons[year];
                        if (!s || !s.playoffs) return '';
                        return `
                            <div class="finish-card">
                                <div class="finish-year">${year}</div>
                                ${s.playoffs.first ? `<div class="finish-item"><span class="finish-emoji">ü•á</span><span class="finish-name">${s.playoffs.first}</span></div>` : ''}
                                ${s.playoffs.second ? `<div class="finish-item"><span class="finish-emoji">ü•à</span><span class="finish-name">${s.playoffs.second}</span></div>` : ''}
                                ${s.playoffs.third ? `<div class="finish-item"><span class="finish-emoji">ü•â</span><span class="finish-name">${s.playoffs.third}</span></div>` : ''}
                                ${s.playoffs.tpf ? `<div class="finish-tpf">üìä TPF: <strong>${s.playoffs.tpf}</strong></div>` : ''}
                            </div>
                        `;
                    }).join('')}
                </div>
            </div>
        </div>
    `;
}

function renderSeason(year) {
    const s = data.seasons[year];
    if (!s) return `<div class="card"><div class="card-body"><p>No data for ${year}</p></div></div>`;
    
    let html = `
        <div class="card">
            <div class="card-header"><span>üìã</span><h2>${year} Final Standings</h2></div>
            <div class="card-body">
                <div class="table-wrapper">
                    ${renderSeasonTable(s.standings)}
                </div>
            </div>
        </div>
    `;
    
    if (s.playoffs && (s.playoffs.first || s.playoffs.second || s.playoffs.third)) {
        html += `
            <div class="card">
                <div class="card-header"><span>üèÜ</span><h2>Playoff Results</h2></div>
                <div class="card-body">
                    <div class="playoff-grid">
                        ${s.playoffs.first ? `<div class="playoff-card gold"><div class="playoff-emoji">ü•á</div><div class="playoff-label">Champion</div><div class="playoff-name">${s.playoffs.first}</div></div>` : ''}
                        ${s.playoffs.second ? `<div class="playoff-card silver"><div class="playoff-emoji">ü•à</div><div class="playoff-label">Runner Up</div><div class="playoff-name">${s.playoffs.second}</div></div>` : ''}
                        ${s.playoffs.third ? `<div class="playoff-card bronze"><div class="playoff-emoji">ü•â</div><div class="playoff-label">Third Place</div><div class="playoff-name">${s.playoffs.third}</div></div>` : ''}
                        ${s.playoffs.tpf ? `<div class="playoff-card tpf"><div class="playoff-emoji">üìä</div><div class="playoff-label">TPF Winner</div><div class="playoff-name">${s.playoffs.tpf}</div></div>` : ''}
                    </div>
                </div>
            </div>
        `;
    }
    
    if (s.highLow && s.highLow.highTeam) {
        html += `
            <div class="card">
                <div class="card-header"><span>üìà</span><h2>Season High/Low Scores</h2></div>
                <div class="card-body">
                    <div class="highlows">
                        <div class="highlow-card high">
                            <div class="highlow-label">üìà Season High</div>
                            <div class="highlow-score">${s.highLow.highScore}</div>
                            <div class="highlow-team">${s.highLow.highTeam}</div>
                            <div class="highlow-week">Week ${s.highLow.highWeek}</div>
                        </div>
                        <div class="highlow-card low">
                            <div class="highlow-label">üìâ Season Low</div>
                            <div class="highlow-score">${s.highLow.lowScore}</div>
                            <div class="highlow-team">${s.highLow.lowTeam}</div>
                            <div class="highlow-week">Week ${s.highLow.lowWeek}</div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }
    
    return html;
}

function renderSeasonTable(standings) {
    const sorted = sortData([...standings], currentSort);
    return `
        <table>
            <thead>
                <tr>
                    <th data-col="rank"># ${sortArrow('rank')}</th>
                    <th data-col="name">MANAGER ${sortArrow('name')}</th>
                    <th data-col="w">W ${sortArrow('w')}</th>
                    <th data-col="l">L ${sortArrow('l')}</th>
                    <th data-col="pf">POINTS FOR ${sortArrow('pf')}</th>
                    <th data-col="pa">POINTS AGAINST ${sortArrow('pa')}</th>
                    <th data-col="playoffWins">PLAYOFF WINS ${sortArrow('playoffWins')}</th>
                    <th data-col="playoffLosses">PLAYOFF LOSSES ${sortArrow('playoffLosses')}</th>
                </tr>
            </thead>
            <tbody>
                ${sorted.map(row => `
                    <tr>
                        <td>${row.rank}</td>
                        <td>${row.name}</td>
                        <td>${row.w}</td>
                        <td>${row.l}</td>
                        <td>${row.pf?.toFixed(2) || 0}</td>
                        <td>${row.pa?.toFixed(2) || 0}</td>
                        <td>${row.playoffWins}</td>
                        <td>${row.playoffLosses}</td>
                    </tr>
                `).join('')}
            </tbody>
        </table>
    `;
}

// ============================================
// ADMIN
// ============================================
function renderAdmin() {
    if (!isAdminLoggedIn) {
        return `
            <div class="card">
                <div class="card-header"><span>üîí</span><h2>Admin Login</h2></div>
                <div class="card-body">
                    <div class="admin-login">
                        <p style="color: #666; margin-bottom: 1rem;">Enter the admin password to manage league data.</p>
                        <input type="password" id="adminPassword" placeholder="Password" onkeypress="if(event.key==='Enter')adminLogin()">
                        <div id="loginError" class="error-msg" style="display:none;"></div>
                        <button onclick="adminLogin()">üîì Login</button>
                    </div>
                </div>
            </div>
        `;
    }
    
    return `
        <div class="admin-header">
            <h2>Admin Dashboard</h2>
            <button class="btn btn-secondary" onclick="adminLogout()">üö™ Logout</button>
        </div>
        
        <div id="adminMessage"></div>
        
        <div class="card">
            <div class="card-header"><span>üìÖ</span><h2>Manage Seasons</h2></div>
            <div class="card-body" id="adminContent">
                <button class="btn btn-success" onclick="addSeason()" style="margin-bottom: 1rem;">‚ûï Add New Season</button>
                <div class="season-list">
                    ${getYears().map(year => `
                        <div class="season-item">
                            <span class="season-name">${year} Season</span>
                            <div class="season-actions">
                                <button class="btn btn-primary" onclick="editSeason('${year}')">‚úèÔ∏è Edit</button>
                                <button class="btn btn-danger" onclick="deleteSeason('${year}')">üóëÔ∏è Delete</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>
    `;
}

function adminLogin() {
    const password = document.getElementById('adminPassword').value;
    if (password === ADMIN_PASSWORD) {
        isAdminLoggedIn = true;
        render();
    } else {
        document.getElementById('loginError').textContent = 'Incorrect password';
        document.getElementById('loginError').style.display = 'block';
    }
}

function adminLogout() {
    isAdminLoggedIn = false;
    render();
}

function showAdminMessage(msg) {
    const el = document.getElementById('adminMessage');
    if (el) {
        el.innerHTML = `<div class="message success">${msg}</div>`;
        setTimeout(() => el.innerHTML = '', 3000);
    }
}

function addSeason() {
    const year = prompt('Enter the year for the new season (e.g., 2026):');
    if (year && /^\d{4}$/.test(year)) {
        if (data.seasons[year]) {
            alert('Season already exists!');
            return;
        }
        data.seasons[year] = {
            standings: Array(10).fill(null).map((_, i) => ({
                rank: i + 1, name: '', w: 0, l: 0, pf: 0, pa: 0, playoffWins: 0, playoffLosses: 0
            })),
            playoffs: { first: '', second: '', third: '', tpf: '' },
            highLow: { highTeam: '', highScore: 0, highWeek: 0, lowTeam: '', lowScore: 0, lowWeek: 0 }
        };
        saveData();
        initNav();
        editSeason(year);
    }
}

function deleteSeason(year) {
    if (confirm(`Are you sure you want to delete the ${year} season?`)) {
        delete data.seasons[year];
        saveData();
        initNav();
        render();
        showAdminMessage(`${year} season deleted.`);
    }
}

function editSeason(year) {
    const s = data.seasons[year];
    const content = document.getElementById('adminContent');
    
    content.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; border-bottom: 2px solid #eee; padding-bottom: 1rem;">
            <h3 style="font-size: 1.25rem;">Editing ${year} Season</h3>
            <div style="display: flex; gap: 0.5rem;">
                <button class="btn btn-secondary" onclick="render()">Cancel</button>
                <button class="btn btn-success" onclick="saveSeason('${year}')">üíæ Save</button>
            </div>
        </div>
        
        <div class="form-section">
            <h4>Standings</h4>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>NAME</th>
                            <th>W</th>
                            <th>L</th>
                            <th>POINTS FOR</th>
                            <th>POINTS AGAINST</th>
                            <th>PLAYOFF WINS</th>
                            <th>PLAYOFF LOSSES</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${s.standings.map((row, i) => `
                            <tr>
                                <td>${i + 1}</td>
                                <td><input type="text" id="name_${i}" value="${row.name}" style="width: 100px;"></td>
                                <td><input type="number" id="w_${i}" value="${row.w}" style="width: 50px;"></td>
                                <td><input type="number" id="l_${i}" value="${row.l}" style="width: 50px;"></td>
                                <td><input type="number" id="pf_${i}" value="${row.pf}" step="0.01" style="width: 80px;"></td>
                                <td><input type="number" id="pa_${i}" value="${row.pa}" step="0.01" style="width: 80px;"></td>
                                <td><input type="number" id="pw_${i}" value="${row.playoffWins}" style="width: 50px;"></td>
                                <td><input type="number" id="pl_${i}" value="${row.playoffLosses}" style="width: 50px;"></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="form-section">
            <h4>Playoff Results</h4>
            <div class="form-grid" style="grid-template-columns: repeat(4, 1fr);">
                <div><label>1st Place</label><input type="text" id="playoff_first" value="${s.playoffs.first}" style="width: 100%;"></div>
                <div><label>2nd Place</label><input type="text" id="playoff_second" value="${s.playoffs.second}" style="width: 100%;"></div>
                <div><label>3rd Place</label><input type="text" id="playoff_third" value="${s.playoffs.third}" style="width: 100%;"></div>
                <div><label>TPF Winner</label><input type="text" id="playoff_tpf" value="${s.playoffs.tpf}" style="width: 100%;"></div>
            </div>
        </div>
        
        <div class="form-section">
            <h4>High/Low Scores</h4>
            <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div><label>High Team</label><input type="text" id="high_team" value="${s.highLow.highTeam}" style="width: 100%;"></div>
                <div><label>High Score</label><input type="number" id="high_score" value="${s.highLow.highScore}" step="0.01" style="width: 100%;"></div>
                <div><label>High Week</label><input type="number" id="high_week" value="${s.highLow.highWeek}" style="width: 100%;"></div>
                <div><label>Low Team</label><input type="text" id="low_team" value="${s.highLow.lowTeam}" style="width: 100%;"></div>
                <div><label>Low Score</label><input type="number" id="low_score" value="${s.highLow.lowScore}" step="0.01" style="width: 100%;"></div>
                <div><label>Low Week</label><input type="number" id="low_week" value="${s.highLow.lowWeek}" style="width: 100%;"></div>
            </div>
        </div>
    `;
}

function saveSeason(year) {
    const s = data.seasons[year];
    
    // Save standings
    for (let i = 0; i < 10; i++) {
        s.standings[i] = {
            rank: i + 1,
            name: document.getElementById(`name_${i}`).value,
            w: parseInt(document.getElementById(`w_${i}`).value) || 0,
            l: parseInt(document.getElementById(`l_${i}`).value) || 0,
            pf: parseFloat(document.getElementById(`pf_${i}`).value) || 0,
            pa: parseFloat(document.getElementById(`pa_${i}`).value) || 0,
            playoffWins: parseInt(document.getElementById(`pw_${i}`).value) || 0,
            playoffLosses: parseInt(document.getElementById(`pl_${i}`).value) || 0
        };
    }
    
    // Save playoffs
    s.playoffs = {
        first: document.getElementById('playoff_first').value,
        second: document.getElementById('playoff_second').value,
        third: document.getElementById('playoff_third').value,
        tpf: document.getElementById('playoff_tpf').value
    };
    
    // Save high/low
    s.highLow = {
        highTeam: document.getElementById('high_team').value,
        highScore: parseFloat(document.getElementById('high_score').value) || 0,
        highWeek: parseInt(document.getElementById('high_week').value) || 0,
        lowTeam: document.getElementById('low_team').value,
        lowScore: parseFloat(document.getElementById('low_score').value) || 0,
        lowWeek: parseInt(document.getElementById('low_week').value) || 0
    };
    
    saveData();
    render();
    showAdminMessage(`${year} season saved!`);
}

// ============================================
// SORTING
// ============================================
function sortArrow(col) {
    if (currentSort.col !== col) return '';
    return `<span class="sort-arrow">${currentSort.dir === 'asc' ? '‚Üë' : '‚Üì'}</span>`;
}

function sortData(arr, sort) {
    if (!sort.col) return arr;
    return arr.sort((a, b) => {
        const aVal = a[sort.col];
        const bVal = b[sort.col];
        if (typeof aVal === 'number') {
            return sort.dir === 'asc' ? aVal - bVal : bVal - aVal;
        }
        return sort.dir === 'asc' 
            ? String(aVal).localeCompare(String(bVal))
            : String(bVal).localeCompare(String(aVal));
    });
}

function sortTable(col, table) {
    if (currentSort.col === col) {
        currentSort.dir = currentSort.dir === 'asc' ? 'desc' : 'asc';
    } else {
        currentSort.col = col;
        currentSort.dir = 'desc';
    }
    render();
}

// ============================================
// INIT
// ============================================
initNav();
render();
    </script>
</body>
</html>
